<!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://beancount.github.io/docs/api_reference/beancount.reports.html" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>beancount.reports - Beancount Documentation</title>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet">
<link href="../css/theme.css" rel="stylesheet">
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="../css/custom.css" rel="stylesheet"/>
<script>
    // Current page data
    var mkdocs_page_name = "beancount.reports";
    var mkdocs_page_input_path = "api_reference/beancount.reports.md";
    var mkdocs_page_url = "/docs/api_reference/beancount.reports.html";
  </script>
<script defer="" src="../js/jquery-2.1.1.min.js"></script>
<script defer="" src="../js/modernizr-2.8.3.min.js"></script>
</link></link></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> Beancount Documentation</a>
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Index</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Outline</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#">Documentation for Users</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../01_command_line_accounting_in_context.html">Command Line Accounting in Context</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../02_the_double_entry_counting_method.html">The Double Entry Counting Method</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03_installing_beancount.html">Installing Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../04_running_beancount_and_generating_reports.html">Running Beancount and Generating Reports</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../05_getting_started_with_beancount.html">Getting Started with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../06_beancount_language_syntax.html">Beancount Language Syntax</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../07_beancount_options_reference.html">Beancount Options Reference</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../08_precision_tolerances.html">Precision Tolerances</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../09_beancount_query_language.html">Beancount Query Language</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../10_beancount_cheat_sheet.html">Beancount Cheat Sheet</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../11_how_inventories_work.html">How Inventories Work</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../12_exporting_your_portfolio.html">Exporting Your Portfolio</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../13_tutorial_example.html">Tutorial &amp; Example</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../14_beancount_history_and_credits.html">Beancount History and Credits</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../15_a_comparison_of_beancount_and_ledger_hledger.html">A Comparison of Beancount and Ledger Hledger</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../16_fetching_prices_in_beancount.html">Fetching Prices in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../17_importing_external_data.html">Importing External Data</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#">Cookbooks &amp; Examples</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../18_command_line_accounting_cookbook.html">Command Line Accounting Cookbook</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../19_trading_with_beancount.html">Trading with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../20_stock_vesting_in_beancount.html">Stock Vesting in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../21_sharing_expenses_with_beancount.html">Sharing Expenses with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../22_how_we_share_expenses.html">How We Share Expenses</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#">Documentation for Developers</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../23_beancount_scripting_plugins.html">Beancount Scripting Plugins</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../24_beancount_design_doc.html">Beancount Design Doc</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../25_ledgerhub_design_doc.html">Ledgerhub Design Doc</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../26_external_contributions.html">External Contributions</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#">Enhancement Proposals &amp; Discussions</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../27_a_proposal_for_an_improvement_on_inventory_booking.html">A Proposal for an Improvement on Inventory Booking</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../28_settlement_dates_in_beancount.html">Settlement Dates in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../29_balance_assertions_in_beancount.html">Balance Assertions in Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../30_fund_accounting_with_beancount.html">Fund Accounting with Beancount</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../31_rounding_precision_in_beancount.html">Rounding Precision in Beancount</a>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">beancount</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.core.html">beancount.core</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.ingest.html">beancount.ingest</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.loader.html">beancount.loader</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.ops.html">beancount.ops</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.parser.html">beancount.parser</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.plugins.html">beancount.plugins</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.prices.html">beancount.prices</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.query.html">beancount.query</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="beancount.reports.html">beancount.reports</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports">beancount.reports</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.balance_reports">balance_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.balance_reports.BalanceSheetReport">BalanceSheetReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.balance_reports.BalanceSheetReport.render_real_html">render_real_html()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.balance_reports.BalancesReport">BalancesReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.balance_reports.BalancesReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.balance_reports.BalancesReport.render_real_html">render_real_html()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.balance_reports.IncomeStatementReport">IncomeStatementReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.balance_reports.IncomeStatementReport.render_real_html">render_real_html()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.base">base</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base.HTMLReport">HTMLReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base.RealizationMeta">RealizationMeta</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.RealizationMeta.__new__">__new__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.RealizationMeta.render_real_html">render_real_html()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base.Report">Report</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.Report.__call__">__call__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.Report.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.Report.from_args">from_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.Report.get_supported_formats">get_supported_formats()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.Report.render">render()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base.ReportError">ReportError</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base.TableReport">TableReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base.TableReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base.get_html_template">get_html_template()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.base_test">base_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base_test.ExampleReport">ExampleReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base_test.ExampleReport.add_args">add_args()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base_test.ExampleTableReport">ExampleTableReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base_test.ExampleTableReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base_test.TestReport">TestReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base_test.TestReport.ReportClass">ReportClass</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base_test.TestReport.setUp">setUp()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base_test.TestTableReport">TestTableReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base_test.TestTableReport.ReportClass">ReportClass</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.base_test.TestTableReport.setUp">setUp()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.base_test.iter_reports">iter_reports()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.context">context</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.context.render_entry_context">render_entry_context()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.context.render_file_context">render_file_context()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.convert_reports">convert_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.HLedgerPrinter">HLedgerPrinter</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.HLedgerReport">HLedgerReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.LedgerPrinter">LedgerPrinter</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.LedgerReport">LedgerReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.postings_by_type">postings_by_type()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.quote">quote()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.quote_currency">quote_currency()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports.split_currency_conversions">split_currency_conversions()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.convert_reports_test">convert_reports_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports_test.TestLedgerConversion">TestLedgerConversion</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.convert_reports_test.TestLedgerConversion.check_parses_ledger">check_parses_ledger()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports_test.TestLedgerUtilityFunctionsOnPostings">TestLedgerUtilityFunctionsOnPostings</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.convert_reports_test.TestLedgerUtilityFunctionsOnPostings.setUp">setUp()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.convert_reports_test.get_ledger_version">get_ledger_version()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.export_reports">export_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.ExportEntry">ExportEntry</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.export_reports.ExportEntry.__getnewargs__">__getnewargs__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.export_reports.ExportEntry.__new__">__new__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.export_reports.ExportEntry.__repr__">__repr__()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.ExportPortfolioReport">ExportPortfolioReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.export_reports.ExportPortfolioReport.add_args">add_args()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.classify_holdings_for_export">classify_holdings_for_export()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.export_holdings">export_holdings()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.get_money_instruments">get_money_instruments()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.get_symbol">get_symbol()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.is_mutual_fund">is_mutual_fund()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports.render_ofx_date">render_ofx_date()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.export_reports_test">export_reports_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.export_reports_test.TestHoldingsReports">TestHoldingsReports</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.export_reports_test.TestHoldingsReports.setUp">setUp()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.gviz">gviz</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.gviz.gviz_timeline">gviz_timeline()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.holdings_reports">holdings_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.CashReport">CashReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.holdings_reports.CashReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.holdings_reports.CashReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.HoldingsReport">HoldingsReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.holdings_reports.HoldingsReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.holdings_reports.HoldingsReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.NetWorthReport">NetWorthReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.holdings_reports.NetWorthReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.get_assets_holdings">get_assets_holdings()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.get_holdings_entries">get_holdings_entries()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.load_from_csv">load_from_csv()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports.report_holdings">report_holdings()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.holdings_reports_test">holdings_reports_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.holdings_reports_test.TestHoldingsReports">TestHoldingsReports</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.holdings_reports_test.TestHoldingsReports.setUp">setUp()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.html_formatter">html_formatter</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter">HTMLFormatter</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.__init__">__init__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_account">render_account()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_amount">render_amount()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_commodity">render_commodity()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_context">render_context()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_doc">render_doc()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_event_type">render_event_type()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_inventory">render_inventory()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_link">render_link()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_number">render_number()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.html_formatter.HTMLFormatter.render_source">render_source()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.journal_html">journal_html</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_html.Row">Row</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_html.Row.__getnewargs__">__getnewargs__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_html.Row.__new__">__new__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_html.Row.__repr__">__repr__()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_html.html_entries_table">html_entries_table()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_html.html_entries_table_with_balance">html_entries_table_with_balance()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_html.iterate_html_postings">iterate_html_postings()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_html.render_links">render_links()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.journal_html_test">journal_html_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_html_test.TestJournalRender">TestJournalRender</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_html_test.TestJournalRender.setUp">setUp()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.journal_reports">journal_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_reports.ConversionsReport">ConversionsReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_reports.DocumentsReport">DocumentsReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_reports.JournalReport">JournalReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_reports.JournalReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_reports.JournalReport.get_postings">get_postings()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_reports.JournalReport.render_real_html">render_real_html()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.journal_text">journal_text</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_text.AmountColumnSizer">AmountColumnSizer</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_text.AmountColumnSizer.get_format">get_format()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_text.AmountColumnSizer.get_generic_format">get_generic_format()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_text.AmountColumnSizer.get_number_width">get_number_width()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_text.AmountColumnSizer.update">update()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_text.get_entry_text_description">get_entry_text_description()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_text.render_posting">render_posting()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_text.size_and_render_amounts">size_and_render_amounts()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_text.text_entries_table">text_entries_table()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.journal_text_test">journal_text_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.journal_text_test.TestJournalTextRender">TestJournalTextRender</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.journal_text_test.TestJournalTextRender.setUp">setUp()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.misc_reports">misc_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.AccountsReport">AccountsReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.ActivityReport">ActivityReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.ActivityReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.ActivityReport.render_real_html">render_real_html()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.CurrentEventsReport">CurrentEventsReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.CurrentEventsReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.ErrorReport">ErrorReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.EventsReport">EventsReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.EventsReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.EventsReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.NoopReport">NoopReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.PrintReport">PrintReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.StatsDirectivesReport">StatsDirectivesReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.StatsDirectivesReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.misc_reports.StatsPostingsReport">StatsPostingsReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.misc_reports.StatsPostingsReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.price_reports">price_reports</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.price_reports.CommoditiesReport">CommoditiesReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.price_reports.CommoditiesReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.price_reports.CommodityLifetimes">CommodityLifetimes</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.price_reports.CommodityLifetimes.add_args">add_args()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.price_reports.CommodityPricesReport">CommodityPricesReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.price_reports.CommodityPricesReport.add_args">add_args()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.price_reports.CommodityPricesReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.price_reports.PriceDBReport">PriceDBReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.price_reports.PricesReport">PricesReport</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.price_reports.TickerReport">TickerReport</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.price_reports.TickerReport.generate_table">generate_table()</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.report">report</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.report.ListFormatsAction">ListFormatsAction</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.report.ListReportsAction">ListReportsAction</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.report.get_all_reports">get_all_reports()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.report.get_list_report_string">get_list_report_string()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.table">table</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.Table">Table</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.table.Table.__getnewargs__">__getnewargs__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.table.Table.__new__">__new__()</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.table.Table.__repr__">__repr__()</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.attribute_to_title">attribute_to_title()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.compute_table_widths">compute_table_widths()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.create_table">create_table()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.render_table">render_table()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.table_to_csv">table_to_csv()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.table_to_html">table_to_html()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.table.table_to_text">table_to_text()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.tree_table">tree_table</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.tree_table.is_account_active">is_account_active()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.tree_table.table_of_balances">table_of_balances()</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.tree_table.tree_table">tree_table()</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#beancount.reports.tree_table_test">tree_table_test</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beancount.reports.tree_table_test.TestTables">TestTables</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#beancount.reports.tree_table_test.TestTables.setUp">setUp()</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.scripts.html">beancount.scripts</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.utils.html">beancount.utils</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="beancount.web.html">beancount.web</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="top navigation" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">Beancount Documentation</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a href="..">Docs</a> »</li>
<li>API reference »</li>
<li>beancount.reports</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/beancount/docs/edit/master/docs/api_reference/beancount.reports.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div role="main">
<div class="section">
<h1 id="beancountreports">beancount.reports<a class="headerlink" href="#beancountreports" title="Permanent link"></a></h1>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#beancount.reports" id="beancount.reports" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#beancount.reports" title="Permanent link"></a></h2>
<div class="doc doc-contents first">
<p>Routines to produce various reports, either to HTML or to text.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.balance_reports">
<code>balance_reports</code>
<a class="headerlink" href="#beancount.reports.balance_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Report classes for all reports that display ending balances of accounts.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.balance_reports.BalanceSheetReport">
<code>BalanceSheetReport</code>
<a class="headerlink" href="#beancount.reports.balance_reports.BalanceSheetReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out a balance sheet.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.balance_reports.BalanceSheetReport.render_real_html">
<code class="highlight language-python">
render_real_html
(cls, real_root, price_map, price_date, options_map, file)

        </code>
<a class="headerlink" href="#beancount.reports.balance_reports.BalanceSheetReport.render_real_html" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Wrap an htmldiv into our standard HTML template.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A price database.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A date for evaluating prices.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict, options as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/balance_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_real_html(cls, real_root, price_map, price_date, options_map, file):
    """Wrap an htmldiv into our standard HTML template.

    Args:
      real_root: An instance of RealAccount.
      price_map: A price database.
      price_date: A date for evaluating prices.
      options_map: A dict, options as produced by the parser.
      file: A file object to write the output to.
    """
    template = get_html_template()
    oss = io.StringIO()
    cls.render_real_htmldiv(real_root, price_map, price_date, options_map, oss)
    file.write(template.format(body=oss.getvalue(),
                               title=''))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.balance_reports.BalancesReport">
<code>BalancesReport</code>
<a class="headerlink" href="#beancount.reports.balance_reports.BalancesReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the trial balance of accounts matching an expression.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.balance_reports.BalancesReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.balance_reports.BalancesReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/balance_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-e', '--filter-expression', '--expression', '--regexp',
                        action='store', default=None,
                        help="Filter expression for which account balances to display.")

    parser.add_argument('-c', '--at-cost', '--cost', action='store_true',
                        help="Render values at cost, convert the units to cost value")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.balance_reports.BalancesReport.render_real_html">
<code class="highlight language-python">
render_real_html
(cls, real_root, price_map, price_date, options_map, file)

        </code>
<a class="headerlink" href="#beancount.reports.balance_reports.BalancesReport.render_real_html" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Wrap an htmldiv into our standard HTML template.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A price database.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A date for evaluating prices.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict, options as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/balance_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_real_html(cls, real_root, price_map, price_date, options_map, file):
    """Wrap an htmldiv into our standard HTML template.

    Args:
      real_root: An instance of RealAccount.
      price_map: A price database.
      price_date: A date for evaluating prices.
      options_map: A dict, options as produced by the parser.
      file: A file object to write the output to.
    """
    template = get_html_template()
    oss = io.StringIO()
    cls.render_real_htmldiv(real_root, price_map, price_date, options_map, oss)
    file.write(template.format(body=oss.getvalue(),
                               title=''))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.balance_reports.IncomeStatementReport">
<code>IncomeStatementReport</code>
<a class="headerlink" href="#beancount.reports.balance_reports.IncomeStatementReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out an income statement.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.balance_reports.IncomeStatementReport.render_real_html">
<code class="highlight language-python">
render_real_html
(cls, real_root, price_map, price_date, options_map, file)

        </code>
<a class="headerlink" href="#beancount.reports.balance_reports.IncomeStatementReport.render_real_html" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Wrap an htmldiv into our standard HTML template.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A price database.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A date for evaluating prices.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict, options as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/balance_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_real_html(cls, real_root, price_map, price_date, options_map, file):
    """Wrap an htmldiv into our standard HTML template.

    Args:
      real_root: An instance of RealAccount.
      price_map: A price database.
      price_date: A date for evaluating prices.
      options_map: A dict, options as produced by the parser.
      file: A file object to write the output to.
    """
    template = get_html_template()
    oss = io.StringIO()
    cls.render_real_htmldiv(real_root, price_map, price_date, options_map, oss)
    file.write(template.format(body=oss.getvalue(),
                               title=''))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.base">
<code>base</code>
<a class="headerlink" href="#beancount.reports.base" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Base class for all reports classes.</p>
<p>Each report class should be able to render a filtered list of entries to a
variety of formats. Each report has a name, some command-line options, and
supports some subset of formats.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base.HTMLReport">
<code>HTMLReport</code>
<a class="headerlink" href="#beancount.reports.base.HTMLReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>A mixin for reports that support forwarding html to htmldiv implementation.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base.RealizationMeta">
<code>RealizationMeta</code>
<a class="headerlink" href="#beancount.reports.base.RealizationMeta" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>A metaclass for reports that render a realization.</p>
<pre><code>The main use of this metaclass is to allow us to create report classes with
render_real_*() methods that accept a RealAccount instance as the basis for
producing a report.

RealAccount can be expensive to build, and may be pre-computed and kept
around to generate the various reports related to a particular filter of a
subset of transactions, and it would be inconvenient to have to recalculate
it every time we need to produce a report. In particular, this is the case
for the web interface: the user selects a particular subset of transactions
to view, and can then click to the various reports related to this subset of
transactions. This is why this is useful.

The classes generated with this metaclass respond to the same interface as
the regular report classes, so that if invoked from the command-line, it
will automatically build the realization from the given set of entries. This
metaclass looks at the class' existing render_real_*() methods and generate
the corresponding render_*() methods automatically.
</code></pre>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.RealizationMeta.__new__">
<code class="highlight language-python">
__new__
(mcs, name, bases, namespace)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
<small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base.RealizationMeta.__new__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Create and return a new object.  See help(type) for accurate signature.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __new__(mcs, name, bases, namespace):
    new_type = super(RealizationMeta, mcs).__new__(mcs, name, bases, namespace)

    # Go through the methods of the new type and look for render_real() methods.
    new_methods = {}
    for attr, value in new_type.__dict__.items():
        match = re.match('render_real_(.*)', attr)
        if not match:
            continue

        # Make sure that if an explicit version of render_*() has already
        # been declared, that we don't override it.
        render_function_name = 'render_{}'.format(match.group(1))
        if render_function_name in new_type.__dict__:
            continue

        # Define a render_*() method on the class.
        def forward_method(self, entries, errors, options_map, file, fwdfunc=value):
            account_types = options.get_account_types(options_map)
            real_root = realization.realize(entries, account_types)
            price_map = prices.build_price_map(entries)
            # Note: When we forward, use the latest date (None).
            return fwdfunc(self, real_root, price_map, None, options_map, file)
        forward_method.__name__ = render_function_name
        new_methods[render_function_name] = forward_method

    # Update the type with the newly defined methods..
    for mname, mvalue in new_methods.items():
        setattr(new_type, mname, mvalue)

    # Auto-generate other methods if necessary.
    if hasattr(new_type, 'render_real_htmldiv'):
        setattr(new_type, 'render_real_html', mcs.render_real_html)

    return new_type
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.RealizationMeta.render_real_html">
<code class="highlight language-python">
render_real_html
(cls, real_root, price_map, price_date, options_map, file)

        </code>
<a class="headerlink" href="#beancount.reports.base.RealizationMeta.render_real_html" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Wrap an htmldiv into our standard HTML template.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A price database.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A date for evaluating prices.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict, options as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_real_html(cls, real_root, price_map, price_date, options_map, file):
    """Wrap an htmldiv into our standard HTML template.

    Args:
      real_root: An instance of RealAccount.
      price_map: A price database.
      price_date: A date for evaluating prices.
      options_map: A dict, options as produced by the parser.
      file: A file object to write the output to.
    """
    template = get_html_template()
    oss = io.StringIO()
    cls.render_real_htmldiv(real_root, price_map, price_date, options_map, oss)
    file.write(template.format(body=oss.getvalue(),
                               title=''))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base.Report">
<code>Report</code>
<a class="headerlink" href="#beancount.reports.base.Report" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Base class for all reports.</p>
<pre><code>Attributes:
  names: A list of strings, the various names of this report. The first name
    is taken to be the authoritative name of the report; the rest are
    considered aliases.
  parser: The parser for the command's arguments. This is used to raise errors.
  args: An object that contains the values of this command's parsed arguments.
</code></pre>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.Report.__call__">
<code class="highlight language-python">
__call__
(self, entries, errors, options_map, output_format=None, file=None)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base.Report.__call__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a report of filtered entries to any format.</p>
<p>This function dispatches to a specific method.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>output_format</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the format. I fnot specified, use
the default format.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>The file to write the output to.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>If no 'file' is provided, return the contents of the report as a
string.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ReportError</code></td>
<td>
<p>If the requested format is not supported.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render(self, entries, errors, options_map, output_format=None, file=None):
    """Render a report of filtered entries to any format.

    This function dispatches to a specific method.

    Args:
      entries: A list of directives to render.
      errors: A list of errors that occurred during processing.
      options_map: A dict of options, as produced by the parser.
      output_format: A string, the name of the format. I fnot specified, use
        the default format.
      file: The file to write the output to.
    Returns:
      If no 'file' is provided, return the contents of the report as a
      string.
    Raises:
      ReportError: If the requested format is not supported.
    """
    try:
        render_method = getattr(self, 'render_{}'.format(output_format or
                                                         self.default_format))
    except AttributeError:
        raise ReportError("Unsupported format: '{}'".format(output_format))

    outfile = io.StringIO() if file is None else file
    result = render_method(entries, errors, options_map, outfile)
    assert result is None, "Render method must write to file."
    if file is None:
        return outfile.getvalue()
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.Report.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base.Report.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    """Add arguments to parse for this report.

    Args:
      parser: An instance of argparse.ArgumentParser.
    """
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.Report.from_args">
<code class="highlight language-python">
from_args
    (argv=None, **
kwds)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base.Report.from_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>A convenience method used to create an instance from arguments.</p>
<p>This creates an instance of the report with default arguments. This is a
convenience that may be used for tests. Our actual script uses subparsers
and invokes add_args() and creates an appropriate instance directly.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>argv</code></td>
<td><code></code></td>
<td>
<p>A list of strings, command-line arguments to use to construct tbe report.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>kwds</code></td>
<td><code></code></td>
<td>
<p>A dict of other keyword arguments to pass to the report's constructor.</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A new instace of the report.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def from_args(cls, argv=None, **kwds):
    """A convenience method used to create an instance from arguments.

    This creates an instance of the report with default arguments. This is a
    convenience that may be used for tests. Our actual script uses subparsers
    and invokes add_args() and creates an appropriate instance directly.

    Args:
      argv: A list of strings, command-line arguments to use to construct tbe report.
      kwds: A dict of other keyword arguments to pass to the report's constructor.
    Returns:
      A new instace of the report.
    """
    parser = version.ArgumentParser()
    cls.add_args(parser)
    return cls(parser.parse_args(argv or []), parser, **kwds)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.Report.get_supported_formats">
<code class="highlight language-python">
get_supported_formats
()

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base.Report.get_supported_formats" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Enumerates the list of supported formats, by inspecting methods of this object.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A list of strings, such as ['html', 'text'].</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def get_supported_formats(cls):
    """Enumerates the list of supported formats, by inspecting methods of this object.

    Returns:
      A list of strings, such as ['html', 'text'].
    """
    formats = []
    for name in dir(cls):
        match = re.match('render_([a-z0-9]+)$', name)
        if match:
            formats.append(match.group(1))
    return sorted(formats)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.Report.render">
<code class="highlight language-python">
render
(self, entries, errors, options_map, output_format=None, file=None)

        </code>
<a class="headerlink" href="#beancount.reports.base.Report.render" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a report of filtered entries to any format.</p>
<p>This function dispatches to a specific method.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>output_format</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the format. I fnot specified, use
the default format.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>The file to write the output to.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>If no 'file' is provided, return the contents of the report as a
string.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ReportError</code></td>
<td>
<p>If the requested format is not supported.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render(self, entries, errors, options_map, output_format=None, file=None):
    """Render a report of filtered entries to any format.

    This function dispatches to a specific method.

    Args:
      entries: A list of directives to render.
      errors: A list of errors that occurred during processing.
      options_map: A dict of options, as produced by the parser.
      output_format: A string, the name of the format. I fnot specified, use
        the default format.
      file: The file to write the output to.
    Returns:
      If no 'file' is provided, return the contents of the report as a
      string.
    Raises:
      ReportError: If the requested format is not supported.
    """
    try:
        render_method = getattr(self, 'render_{}'.format(output_format or
                                                         self.default_format))
    except AttributeError:
        raise ReportError("Unsupported format: '{}'".format(output_format))

    outfile = io.StringIO() if file is None else file
    result = render_method(entries, errors, options_map, outfile)
    assert result is None, "Render method must write to file."
    if file is None:
        return outfile.getvalue()
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base.ReportError">
<code>ReportError</code>
<a class="headerlink" href="#beancount.reports.base.ReportError" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Error that occurred during report generation.</p>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base.TableReport">
<code>TableReport</code>
<a class="headerlink" href="#beancount.reports.base.TableReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>A base class for reports that supports automatic conversions from Table.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base.TableReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.base.TableReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    """Render the report to a Table instance.

    Args:
      entries: A list of directives to render.
      errors: A list of errors that occurred during processing.
      options_map: A dict of options, as produced by the parser.
    Returns:
      An instance of Table, that will get converted to another format.
    """
    raise NotImplementedError
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.base.get_html_template">
<code class="highlight language-python">
get_html_template
()

        </code>
<a class="headerlink" href="#beancount.reports.base.get_html_template" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Returns our vanilla HTML template for embedding an HTML div.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A string, with a formatting style placeholders</code></td>
<td>
<p>{title}: for the title of the page.
  {body}: for the body, where the div goes.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_html_template():
    """Returns our vanilla HTML template for embedding an HTML div.

    Returns:
      A string, with a formatting style placeholders:
        {title}: for the title of the page.
        {body}: for the body, where the div goes.
    """
    return open(path.join(path.dirname(__file__), 'template.html')).read()
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.base_test">
<code>base_test</code>
<a class="headerlink" href="#beancount.reports.base_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base_test.ExampleReport">
<code>ExampleReport</code>
<a class="headerlink" href="#beancount.reports.base_test.ExampleReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base_test.ExampleReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base_test.ExampleReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('--currency', default='CAD', help="Currency.")
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base_test.ExampleTableReport">
<code>ExampleTableReport</code>
<a class="headerlink" href="#beancount.reports.base_test.ExampleTableReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base_test.ExampleTableReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.base_test.ExampleTableReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    ABC = collections.namedtuple('ABC', 'account balance')
    return table.create_table([ABC('account1', D(2000)),
                               ABC('account2', D(5000))])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base_test.TestReport">
<code>TestReport</code>
<a class="headerlink" href="#beancount.reports.base_test.TestReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="beancount.reports.base_test.TestReport.ReportClass">
<code>ReportClass</code>
<a class="headerlink" href="#beancount.reports.base_test.TestReport.ReportClass" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="beancount.reports.base_test.TestReport.ReportClass.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.base_test.TestReport.ReportClass.add_args" title="Permanent link"></a></h5>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('--currency', default='CAD', help="Currency.")
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base_test.TestReport.setUp">
<code class="highlight language-python">
setUp
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.base_test.TestReport.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc()
def setUp(self, entries, errors, options_map):
    """
    2014-07-27 open Assets:Example
    """
    self.entries = entries
    self.errors = errors
    self.options_map = options_map
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.base_test.TestTableReport">
<code>TestTableReport</code>
<a class="headerlink" href="#beancount.reports.base_test.TestTableReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="beancount.reports.base_test.TestTableReport.ReportClass">
<code>ReportClass</code>
<a class="headerlink" href="#beancount.reports.base_test.TestTableReport.ReportClass" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="beancount.reports.base_test.TestTableReport.ReportClass.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.base_test.TestTableReport.ReportClass.generate_table" title="Permanent link"></a></h5>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    ABC = collections.namedtuple('ABC', 'account balance')
    return table.create_table([ABC('account1', D(2000)),
                               ABC('account2', D(5000))])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.base_test.TestTableReport.setUp">
<code class="highlight language-python">
setUp
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.base_test.TestTableReport.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc()
def setUp(self, entries, errors, options_map):
    """
    2014-07-27 open Assets:Example
    """
    self.entries = entries
    self.errors = errors
    self.options_map = options_map
    self.report = self.ReportClass.from_args()
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.base_test.iter_reports">
<code class="highlight language-python">
iter_reports
(report_classes)

        </code>
<a class="headerlink" href="#beancount.reports.base_test.iter_reports" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Iterate over and instantiate all report classes.</p>
<p>Yields:
  Pairs of (report instance, supported output format).</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/base_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def iter_reports(report_classes):
    """Iterate over and instantiate all report classes.

    Args:
      A list of subclasses of base.Base.
    Yields:
      Pairs of (report instance, supported output format).
    """
    for report_class in report_classes:
        assert issubclass(report_class, base.Report), report_class
        argv = getattr(report_class, 'test_args', [])
        report_ = report_class.from_args(argv)
        for format_ in report_class.get_supported_formats():
            yield (report_, format_)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.context">
<code>context</code>
<a class="headerlink" href="#beancount.reports.context" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Produce a rendering of the account balances just before and after a
particular entry is applied.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.context.render_entry_context">
<code class="highlight language-python">
render_entry_context
(entries, options_map, entry)

        </code>
<a class="headerlink" href="#beancount.reports.context.render_entry_context" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render the context before and after a particular transaction is applied.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>entry</code></td>
<td><code></code></td>
<td>
<p>The entry instance which should be rendered. (Note that this object is
expected to be in the set of entries, not just structurally equal.)</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A multiline string of text, which consists of the context before the
transaction is applied, the transaction itself, and the context after it
is applied. You can just print that, it is in form that is intended to be
consumed by the user.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/context.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_entry_context(entries, options_map, entry):
    """Render the context before and after a particular transaction is applied.

    Args:
      entries: A list of directives.
      options_map: A dict of options, as produced by the parser.
      entry: The entry instance which should be rendered. (Note that this object is
        expected to be in the set of entries, not just structurally equal.)
    Returns:
      A multiline string of text, which consists of the context before the
      transaction is applied, the transaction itself, and the context after it
      is applied. You can just print that, it is in form that is intended to be
      consumed by the user.
    """
    oss = io.StringIO()

    meta = entry.meta
    print("Hash:{}".format(compare.hash_entry(entry)), file=oss)
    print("Location: {}:{}".format(meta["filename"], meta["lineno"]), file=oss)

    # Get the list of accounts sorted by the order in which they appear in the
    # closest entry.
    order = {}
    if isinstance(entry, data.Transaction):
        order = {posting.account: index
                 for index, posting in enumerate(entry.postings)}
    accounts = sorted(getters.get_entry_accounts(entry),
                      key=lambda account: order.get(account, 10000))

    # Accumulate the balances of these accounts up to the entry.
    balance_before, balance_after = interpolate.compute_entry_context(entries,
                                                                      entry)

    # Create a format line for printing the contents of account balances.
    max_account_width = max(map(len, accounts)) if accounts else 1
    position_line = '{{:1}} {{:{width}}}  {{:&gt;49}}'.format(width=max_account_width)

    # Print the context before.
    print(file=oss)
    print("------------ Balances before transaction", file=oss)
    print(file=oss)
    before_hashes = set()
    for account in accounts:
        positions = balance_before[account].get_positions()
        for position in positions:
            before_hashes.add((account, hash(position)))
            print(position_line.format('', account, str(position)), file=oss)
        if not positions:
            print(position_line.format('', account, ''), file=oss)
        print(file=oss)

    # Print the entry itself.
    print(file=oss)
    print("------------ Transaction", file=oss)
    print(file=oss)
    dcontext = options_map['dcontext']
    printer.print_entry(entry, dcontext, render_weights=True, file=oss)

    if isinstance(entry, data.Transaction):
        print(file=oss)

        # Print residuals.
        residual = interpolate.compute_residual(entry.postings)
        if not residual.is_empty():
            # Note: We render the residual at maximum precision, for debugging.
            print('Residual: {}'.format(residual), file=oss)

        # Dump the tolerances used.
        tolerances = interpolate.infer_tolerances(entry.postings, options_map)
        if tolerances:
            print('Tolerances: {}'.format(
                ', '.join('{}={}'.format(key, value)
                          for key, value in sorted(tolerances.items()))), file=oss)

        # Compute the total cost basis.
        cost_basis = inventory.Inventory(
            pos for pos in entry.postings if pos.cost is not None
        ).reduce(convert.get_cost)
        if not cost_basis.is_empty():
            print('Basis: {}'.format(cost_basis), file=oss)

    # Print the context after.
    print(file=oss)
    print("------------ Balances after transaction", file=oss)
    print(file=oss)
    for account in accounts:
        positions = balance_after[account].get_positions()
        for position in positions:
            changed = (account, hash(position)) not in before_hashes
            print(position_line.format('*' if changed else '', account, str(position)),
                  file=oss)
        if not positions:
            print(position_line.format('', account, ''), file=oss)
        print(file=oss)

    return oss.getvalue()
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.context.render_file_context">
<code class="highlight language-python">
render_file_context
(entries, options_map, filename, lineno)

        </code>
<a class="headerlink" href="#beancount.reports.context.render_file_context" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render the context before and after a particular transaction is applied.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the file from which the transaction was parsed.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>lineno</code></td>
<td><code></code></td>
<td>
<p>An integer, the line number in the file the transaction was parsed from.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A multiline string of text, which consists of the context before the
transaction is applied, the transaction itself, and the context after it
is applied. You can just print that, it is in form that is intended to be
consumed by the user.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/context.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_file_context(entries, options_map, filename, lineno):
    """Render the context before and after a particular transaction is applied.

    Args:
      entries: A list of directives.
      options_map: A dict of options, as produced by the parser.
      filename: A string, the name of the file from which the transaction was parsed.
      lineno: An integer, the line number in the file the transaction was parsed from.
    Returns:
      A multiline string of text, which consists of the context before the
      transaction is applied, the transaction itself, and the context after it
      is applied. You can just print that, it is in form that is intended to be
      consumed by the user.
    """
    # Find the closest entry.
    closest_entry = data.find_closest(entries, filename, lineno)
    if closest_entry is None:
        raise SystemExit("No entry could be found before {}:{}".format(filename, lineno))

    return render_entry_context(entries, options_map, closest_entry)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.convert_reports">
<code>convert_reports</code>
<a class="headerlink" href="#beancount.reports.convert_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Format converter reports.</p>
<p>This module contains reports that can convert an input file into other formats,
such as Ledger.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.HLedgerPrinter">
<code>HLedgerPrinter</code>
<a class="headerlink" href="#beancount.reports.convert_reports.HLedgerPrinter" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Multi-method for printing directives in HLedger format.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.HLedgerReport">
<code>HLedgerReport</code>
<a class="headerlink" href="#beancount.reports.convert_reports.HLedgerReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the entries in a format that can be parsed by HLedger.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.LedgerPrinter">
<code>LedgerPrinter</code>
<a class="headerlink" href="#beancount.reports.convert_reports.LedgerPrinter" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Multi-method for printing directives in Ledger format.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.LedgerReport">
<code>LedgerReport</code>
<a class="headerlink" href="#beancount.reports.convert_reports.LedgerReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the entries in a format that can be parsed by Ledger.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.postings_by_type">
<code class="highlight language-python">
postings_by_type
(entry)

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports.postings_by_type" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Split up the postings by simple, at-cost, at-price.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entry</code></td>
<td><code></code></td>
<td>
<p>An instance of Transaction.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A tuple of simple postings, postings with price conversions, postings held at cost.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def postings_by_type(entry):
    """Split up the postings by simple, at-cost, at-price.

    Args:
      entry: An instance of Transaction.
    Returns:
      A tuple of simple postings, postings with price conversions, postings held at cost.
    """
    postings_at_cost = []
    postings_at_price = []
    postings_simple = []
    for posting in entry.postings:
        if posting.cost:
            accumlator = postings_at_cost
        elif posting.price:
            accumlator = postings_at_price
        else:
            accumlator = postings_simple
        accumlator.append(posting)

    return (postings_simple, postings_at_price, postings_at_cost)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.quote">
<code class="highlight language-python">
quote
(match)

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports.quote" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Add quotes around a re.MatchObject.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>match</code></td>
<td><code></code></td>
<td>
<p>A MatchObject from the re module.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A quoted string of the match contents.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def quote(match):
    """Add quotes around a re.MatchObject.

    Args:
      match: A MatchObject from the re module.
    Returns:
      A quoted string of the match contents.
    """
    currency = match.group(1)
    return '"{}"'.format(currency) if re.search(r'[0-9\.]', currency) else currency
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.quote_currency">
<code class="highlight language-python">
quote_currency
(string)

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports.quote_currency" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Quote all the currencies with numbers from the given string.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td><code></code></td>
<td>
<p>A string of text.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of text, with the commodity expressions surrounded with quotes.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def quote_currency(string):
    """Quote all the currencies with numbers from the given string.

    Args:
      string: A string of text.
    Returns:
      A string of text, with the commodity expressions surrounded with quotes.
    """
    return re.sub(r'\b({})\b'.format(amount.CURRENCY_RE), quote, string)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports.split_currency_conversions">
<code class="highlight language-python">
split_currency_conversions
(entry)

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports.split_currency_conversions" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>If the transcation has a mix of conversion at cost and a
currency conversion, split the transction into two transactions: one
that applies the currency conversion in the same account, and one
that uses the other currency without conversion.</p>
<p>This is required because Ledger does not appear to be able to grok a
transaction like this one:</p>
<p>2014-11-02 * "Buy some stock with foreign currency funds"
    Assets:CA:Investment:HOOL          5 HOOL {520.0 USD}
    Expenses:Commissions            9.95 USD
    Assets:CA:Investment:Cash   -2939.46 CAD @ 0.8879 USD</p>
<p>HISTORICAL NOTE: Adding a price directive on the first posting above makes
Ledger accept the transaction. So we will not split the transaction here
now. However, since Ledger's treatment of this type of conflict is subject
to revision (See http://bugs.ledger-cli.org/show_bug.cgi?id=630), we will
keep this code around, it might become useful eventually. See
https://groups.google.com/d/msg/ledger-cli/35hA0Dvhom0/WX8gY_5kHy0J for
details of the discussion.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entry</code></td>
<td><code></code></td>
<td>
<p>An instance of Transaction.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A pair of
  converted</code></td>
<td>
<p>boolean, true if a conversion was made.
  entries: A list of the original entry if converted was False,
    or a list of the split converted entries if True.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def split_currency_conversions(entry):
    """If the transcation has a mix of conversion at cost and a
    currency conversion, split the transction into two transactions: one
    that applies the currency conversion in the same account, and one
    that uses the other currency without conversion.

    This is required because Ledger does not appear to be able to grok a
    transaction like this one:

      2014-11-02 * "Buy some stock with foreign currency funds"
        Assets:CA:Investment:HOOL          5 HOOL {520.0 USD}
        Expenses:Commissions            9.95 USD
        Assets:CA:Investment:Cash   -2939.46 CAD @ 0.8879 USD

    HISTORICAL NOTE: Adding a price directive on the first posting above makes
    Ledger accept the transaction. So we will not split the transaction here
    now. However, since Ledger's treatment of this type of conflict is subject
    to revision (See http://bugs.ledger-cli.org/show_bug.cgi?id=630), we will
    keep this code around, it might become useful eventually. See
    https://groups.google.com/d/msg/ledger-cli/35hA0Dvhom0/WX8gY_5kHy0J for
    details of the discussion.

    Args:
      entry: An instance of Transaction.
    Returns:
      A pair of
        converted: boolean, true if a conversion was made.
        entries: A list of the original entry if converted was False,
          or a list of the split converted entries if True.
    """
    assert isinstance(entry, data.Transaction)

    (postings_simple, postings_at_price, postings_at_cost) = postings_by_type(entry)

    converted = postings_at_cost and postings_at_price
    if converted:
        # Generate a new entry for each currency conversion.
        new_entries = []
        replacement_postings = []
        for posting_orig in postings_at_price:
            weight = convert.get_weight(posting_orig)
            posting_pos = data.Posting(posting_orig.account, weight, None,
                                       None, None, None)
            posting_neg = data.Posting(posting_orig.account, -weight, None,
                                       None, None, None)

            currency_entry = entry._replace(
                postings=[posting_orig, posting_neg],
                narration=entry.narration + ' (Currency conversion)')
            new_entries.append(currency_entry)
            replacement_postings.append(posting_pos)

        converted_entry = entry._replace(postings=(
            postings_at_cost + postings_simple + replacement_postings))
        new_entries.append(converted_entry)
    else:
        new_entries = [entry]

    return converted, new_entries
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.convert_reports_test">
<code>convert_reports_test</code>
<a class="headerlink" href="#beancount.reports.convert_reports_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports_test.TestLedgerConversion">
<code>TestLedgerConversion</code>
<a class="headerlink" href="#beancount.reports.convert_reports_test.TestLedgerConversion" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.convert_reports_test.TestLedgerConversion.check_parses_ledger">
<code class="highlight language-python">
check_parses_ledger
(self, ledger_filename)

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports_test.TestLedgerConversion.check_parses_ledger" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Assert that the filename parses through Ledger without errors.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filename</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the Ledger file.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def check_parses_ledger(self, ledger_filename):
    """Assert that the filename parses through Ledger without errors.

    Args:
      filename: A string, the name of the Ledger file.
    """
    version = get_ledger_version()
    if version is None or version &lt; (3, 0, 0):
        self.skipTest('Ledger is not installed or has insufficient version, '
                      'cannot verify conversion; skipping test')

    pipe = subprocess.Popen(['ledger', '-f', ledger_filename, 'bal'],
                            shell=False,
                            stdout=subprocess.PIPE,
                            stderr=subprocess.PIPE)
    stdout, stderr = pipe.communicate()
    self.assertEqual(0, pipe.returncode, stderr)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports_test.TestLedgerUtilityFunctionsOnPostings">
<code>TestLedgerUtilityFunctionsOnPostings</code>
<a class="headerlink" href="#beancount.reports.convert_reports_test.TestLedgerUtilityFunctionsOnPostings" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.convert_reports_test.TestLedgerUtilityFunctionsOnPostings.setUp">
<code class="highlight language-python">
setUp
(self, entries, _, __)

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports_test.TestLedgerUtilityFunctionsOnPostings.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc()
def setUp(self, entries, _, __):
    """
      2000-01-01 open Assets:CA:Investment:HOOL
      2000-01-01 open Expenses:Commissions
      2000-01-01 open Assets:CA:Investment:Cash

      2014-10-01 * "Buy some stock with local funds"
        Assets:CA:Investment:HOOL          5 HOOL {500.00 USD}
        Expenses:Commissions            9.95 USD
        Assets:CA:Investment:Cash   -2509.95 USD

      2014-10-02 * "Regular price conversion with fee"
        Assets:CA:Investment:Cash    2500.00 USD
        Expenses:Commissions            9.95 USD
        Assets:CA:Investment:Cash   -2826.84 CAD @ 0.8879 USD

      2014-10-03 * "Buy some stock with foreign currency funds"
        Assets:CA:Investment:HOOL          5 HOOL {520.0 USD}
        Expenses:Commissions            9.95 USD
        Assets:CA:Investment:Cash   -2939.46 CAD @ 0.8879 USD
    """
    self.txns = [entry for entry in entries if isinstance(entry, data.Transaction)]
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.convert_reports_test.get_ledger_version">
<code class="highlight language-python">
get_ledger_version
()

        </code>
<a class="headerlink" href="#beancount.reports.convert_reports_test.get_ledger_version" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Check that we have a sufficient version of Ledger installed.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A tuple of integer, the Ledger binary version triple, or None,
if Ledger is not installed or could not be run.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/convert_reports_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_ledger_version():
    """Check that we have a sufficient version of Ledger installed.

    Returns:
      A tuple of integer, the Ledger binary version triple, or None,
      if Ledger is not installed or could not be run.
    """
    try:
        pipe = subprocess.Popen(['ledger', '--version'],
                                shell=False,
                                stdout=subprocess.PIPE,
                                stderr=subprocess.PIPE)
        stdout, stderr = pipe.communicate()
        match = re.search(r'(\d+)\.(\d+)\.(\d+)', stdout.decode('utf-8'))
        if match:
            return tuple(map(int, match.group(1, 2, 3)))
    except OSError:
        pass
    return None
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.export_reports">
<code>export_reports</code>
<a class="headerlink" href="#beancount.reports.export_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Reports to Export to third-party portfolio sites.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.ExportEntry">
<code>ExportEntry</code>
<a class="headerlink" href="#beancount.reports.export_reports.ExportEntry" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>ExportEntry(symbol, cost_currency, number, cost_number, mutual_fund, memo, holdings)</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.export_reports.ExportEntry.__getnewargs__">
<code class="highlight language-python">
__getnewargs__
(self)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.export_reports.ExportEntry.__getnewargs__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return self as a plain tuple.  Used by copy and pickle.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __getnewargs__(self):
    'Return self as a plain tuple.  Used by copy and pickle.'
    return _tuple(self)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.export_reports.ExportEntry.__new__">
<code class="highlight language-python">
__new__
(_cls, symbol, cost_currency, number, cost_number, mutual_fund, memo, holdings)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
<small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.export_reports.ExportEntry.__new__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Create new instance of ExportEntry(symbol, cost_currency, number, cost_number, mutual_fund, memo, holdings)</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.export_reports.ExportEntry.__repr__">
<code class="highlight language-python">
__repr__
(self)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.export_reports.ExportEntry.__repr__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return a nicely formatted representation string</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __repr__(self):
    'Return a nicely formatted representation string'
    return self.__class__.__name__ + repr_fmt % self
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.ExportPortfolioReport">
<code>ExportPortfolioReport</code>
<a class="headerlink" href="#beancount.reports.export_reports.ExportPortfolioReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Holdings lists that can be exported to external portfolio management software.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.export_reports.ExportPortfolioReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.export_reports.ExportPortfolioReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-d', '--debug', action='store_true',
                        help="Output position export debugging information on stderr.")

    parser.add_argument('-p', '--promiscuous', action='store_true',
                        help=("Include title and account names in memos. "
                              "Use this if you trust wherever you upload."))

    parser.add_argument('-a', '--aggregate-by-commodity', action='store_true',
                        help=("Group the holdings by account. This may help if your "
                              "portfolio fails to import and you have many holdings."))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.classify_holdings_for_export">
<code class="highlight language-python">
classify_holdings_for_export
(holdings_list, commodities_map)

        </code>
<a class="headerlink" href="#beancount.reports.export_reports.classify_holdings_for_export" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Figure out what to do for example with each holding.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>holdings_list</code></td>
<td><code></code></td>
<td>
<p>A list of Holding instances to be exported.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>commodities_map</code></td>
<td><code></code></td>
<td>
<p>A dict of commodity to Commodity instances.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A pair of</code></td>
<td>
<p>action_holdings: A list of (symbol, holding) for each holding. 'Symbol'
    is the ticker to use for export, and may be "CASH" or "IGNORE" for
    holdings to be converted or ignored.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def classify_holdings_for_export(holdings_list, commodities_map):
    """Figure out what to do for example with each holding.

    Args:
      holdings_list: A list of Holding instances to be exported.
      commodities_map: A dict of commodity to Commodity instances.
    Returns:
      A pair of:
        action_holdings: A list of (symbol, holding) for each holding. 'Symbol'
          is the ticker to use for export, and may be "CASH" or "IGNORE" for
          holdings to be converted or ignored.
    """
    # Get the map of commodities to tickers and export meta tags.
    exports = getters.get_values_meta(commodities_map, FIELD)

    # Classify the holdings based on their commodities' ticker metadata field.
    action_holdings = []
    for holding in holdings_list:
        # Get export field and remove (MONEY:...) specifications.
        export = re.sub(r'\(.*\)', '', exports.get(holding.currency, None) or '').strip()
        if export:
            if export.upper() == "CASH":
                action_holdings.append(('CASH', holding))
            elif export.upper() == "IGNORE":
                action_holdings.append(('IGNORE', holding))
            else:
                action_holdings.append((export, holding))
        else:
            logging.warning(("Exporting holding using default commodity name '{}'; this "
                             "can potentially break the OFX import. Consider providing "
                             "'export' metadata for your commodities.").format(
                                 holding.currency))
            action_holdings.append((holding.currency, holding))

    return action_holdings
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.export_holdings">
<code class="highlight language-python">
export_holdings
(entries, options_map, promiscuous, aggregate_by_commodity=False)

        </code>
<a class="headerlink" href="#beancount.reports.export_reports.export_holdings" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Compute a list of holdings to export.</p>
<p>Holdings that are converted to cash equivalents will receive a currency of
"CASH:&lt;currency&gt;" where &lt;currency&gt; is the converted cash currency.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options as provided by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>promiscuous</code></td>
<td><code></code></td>
<td>
<p>A boolean, true if we should output a promiscuious memo.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>aggregate_by_commodity</code></td>
<td><code></code></td>
<td>
<p>A boolean, true if we should group the holdings by account.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A pair of
  exported</code></td>
<td>
<p>A list of ExportEntry tuples, one for each exported position.
  converted: A list of ExportEntry tuples, one for each converted position.
    These will contain multiple holdings.
  holdings_ignored: A list of Holding instances that were ignored, either
    because they were explicitly marked to be ignored, or because we could
    not convert them to a money vehicle matching the holding's cost-currency.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def export_holdings(entries, options_map, promiscuous, aggregate_by_commodity=False):
    """Compute a list of holdings to export.

    Holdings that are converted to cash equivalents will receive a currency of
    "CASH:&lt;currency&gt;" where &lt;currency&gt; is the converted cash currency.

    Args:
      entries: A list of directives.
      options_map: A dict of options as provided by the parser.
      promiscuous: A boolean, true if we should output a promiscuious memo.
      aggregate_by_commodity: A boolean, true if we should group the holdings by account.
    Returns:
      A pair of
        exported: A list of ExportEntry tuples, one for each exported position.
        converted: A list of ExportEntry tuples, one for each converted position.
          These will contain multiple holdings.
        holdings_ignored: A list of Holding instances that were ignored, either
          because they were explicitly marked to be ignored, or because we could
          not convert them to a money vehicle matching the holding's cost-currency.
    """
    # Get the desired list of holdings.
    holdings_list, price_map = holdings_reports.get_assets_holdings(entries, options_map)
    commodities_map = getters.get_commodity_map(entries)
    dcontext = options_map['dcontext']

    # Aggregate the holdings, if requested. Google Finance is notoriously
    # finnicky and if you have many holdings this might help.
    if aggregate_by_commodity:
        holdings_list = holdings.aggregate_holdings_by(holdings_list,
                                                       lambda holding: holding.currency)

    # Classify all the holdings for export.
    action_holdings = classify_holdings_for_export(holdings_list, commodities_map)

    # The lists of exported and converted export entries, and the list of
    # ignored holdings.
    exported = []
    converted = []
    holdings_ignored = []

    # Export the holdings with tickers individually.
    for symbol, holding in action_holdings:
        if symbol in ("CASH", "IGNORE"):
            continue

        if holding.cost_number is None:
            assert holding.cost_currency in (None, holding.currency)
            cost_number = holding.number
            cost_currency = holding.currency
        else:
            cost_number = holding.cost_number
            cost_currency = holding.cost_currency

        exported.append(
            ExportEntry(symbol,
                        cost_currency,
                        holding.number,
                        cost_number,
                        is_mutual_fund(symbol),
                        holding.account if promiscuous else '',
                        [holding]))

    # Convert all the cash entries to their book and market value by currency.
    cash_holdings_map = collections.defaultdict(list)
    for symbol, holding in action_holdings:
        if symbol != "CASH":
            continue

        if holding.cost_currency:
            # Accumulate market and book values.
            cash_holdings_map[holding.cost_currency].append(holding)
        else:
            # We cannot price this... no cost currency.
            holdings_ignored.append(holding)

    # Get the money instruments.
    money_instruments = get_money_instruments(commodities_map)

    # Convert all the cash values to money instruments, if possible. If not
    # possible, we'll just have to ignore those values.

    # Go through all the holdings to convert, and for each of those which aren't
    # in terms of one of the money instruments, which we can directly add to the
    # exported portfolio, attempt to convert them into currencies to one of
    # those in the money instruments.
    money_values_book = collections.defaultdict(D)
    money_values_market = collections.defaultdict(D)
    money_values_holdings = collections.defaultdict(list)
    for cost_currency, holdings_list in cash_holdings_map.items():
        book_value = sum(holding.book_value for holding in holdings_list)
        market_value = sum(holding.market_value for holding in holdings_list)

        if cost_currency in money_instruments:
            # The holding is already in terms of one of the money instruments.
            money_values_book[cost_currency] += book_value
            money_values_market[cost_currency] += market_value
            money_values_holdings[cost_currency].extend(holdings_list)
        else:
            # The holding is not in terms of one of the money instruments.
            # Find the first available price to convert it into one
            for money_currency in money_instruments:
                base_quote = (cost_currency, money_currency)
                _, rate = prices.get_latest_price(price_map, base_quote)
                if rate is not None:
                    money_values_book[money_currency] += book_value * rate
                    money_values_market[money_currency] += market_value * rate
                    money_values_holdings[money_currency].extend(holdings_list)
                    break
            else:
                # We could not convert into any of the money commodities. Ignore
                # those holdings.
                holdings_ignored.extend(holdings_list)

    for money_currency in money_values_book.keys():
        book_value = money_values_book[money_currency]
        market_value = money_values_market[money_currency]
        holdings_list = money_values_holdings[money_currency]

        symbol = money_instruments[money_currency]

        assert isinstance(book_value, Decimal)
        assert isinstance(market_value, Decimal)
        converted.append(
            ExportEntry(symbol,
                        money_currency,
                        dcontext.quantize(market_value, money_currency),
                        dcontext.quantize(book_value / market_value, money_currency),
                        is_mutual_fund(symbol),
                        '',
                        holdings_list))

    # Add all ignored holdings to a final list.
    for symbol, holding in action_holdings:
        if symbol == "IGNORE":
            holdings_ignored.append(holding)

    return exported, converted, holdings_ignored
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.get_money_instruments">
<code class="highlight language-python">
get_money_instruments
(commodities_map)

        </code>
<a class="headerlink" href="#beancount.reports.export_reports.get_money_instruments" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Get the money-market stand-ins for cash positions.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>commodities_map</code></td>
<td><code></code></td>
<td>
<p>A map of currency to their corresponding Commodity directives.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A dict of quote currency to the ticker symbol that stands for it,
e.g. {'USD'</code></td>
<td>
<p>'VMMXX'}.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_money_instruments(commodities_map):
    """Get the money-market stand-ins for cash positions.

    Args:
      commodities_map: A map of currency to their corresponding Commodity directives.
    Returns:
      A dict of quote currency to the ticker symbol that stands for it,
      e.g. {'USD': 'VMMXX'}.
    """
    instruments = {}
    for currency, entry in commodities_map.items():
        export = entry.meta.get(FIELD, '')
        paren_match = re.search(r'\((.*)\)', export)
        if paren_match:
            match = re.match('MONEY:({})'.format(amount.CURRENCY_RE), paren_match.group(1))
            if match:
                instruments[match.group(1)] = (
                    re.sub(r'\(.*\)', '', export).strip() or currency)
            else:
                logging.error("Invalid money specification: %s", export)

    return instruments
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.get_symbol">
<code class="highlight language-python">
get_symbol
(sources, prefer='google')

        </code>
<a class="headerlink" href="#beancount.reports.export_reports.get_symbol" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Filter a source specification to some corresponding ticker.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td><code></code></td>
<td>
<p>A comma-separated list of sources as a string, such as
"google/NASDAQ:AAPL,yahoo/AAPL".</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>The symbol string.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ValueError</code></td>
<td>
<p>If the sources does not contain a ticker for the
google source.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_symbol(sources, prefer='google'):
    """Filter a source specification to some corresponding ticker.

    Args:
      source: A comma-separated list of sources as a string, such as
        "google/NASDAQ:AAPL,yahoo/AAPL".
    Returns:
      The symbol string.
    Raises:
      ValueError: If the sources does not contain a ticker for the
        google source.
    """

    # If the ticker is a list of &lt;source&gt;/&lt;symbol&gt;, extract the symbol
    # from it.
    symbol_items = []
    for source in map(str.strip, sources.split(',')):
        match = re.match('([a-zA-Z][a-zA-Z0-9._]+)/(.*)', source)
        if match:
            source, symbol = match.groups()
        else:
            source, symbol = None, source
        symbol_items.append((source, symbol))
    if not symbol_items:
        raise ValueError(
            'Invalid source "{}" does not contain a ticker'.format(sources))
    symbol_map = dict(symbol_items)
    # If not found, return the first symbol in the list of items.
    return symbol_map.get(prefer, symbol_items[0][1])
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.is_mutual_fund">
<code class="highlight language-python">
is_mutual_fund
(ticker)

        </code>
<a class="headerlink" href="#beancount.reports.export_reports.is_mutual_fund" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Return true if the GFinanc ticker is for a mutual fund.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ticker</code></td>
<td><code></code></td>
<td>
<p>A string, the symbol for GFinance.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A boolean, true for mutual funds.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def is_mutual_fund(ticker):
    """Return true if the GFinanc ticker is for a mutual fund.

    Args:
      ticker: A string, the symbol for GFinance.
    Returns:
      A boolean, true for mutual funds.
    """
    return bool(re.match('MUTF.*:', ticker))
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.export_reports.render_ofx_date">
<code class="highlight language-python">
render_ofx_date
(dtime)

        </code>
<a class="headerlink" href="#beancount.reports.export_reports.render_ofx_date" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a datetime to the OFX format.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dtime</code></td>
<td><code></code></td>
<td>
<p>A datetime.datetime instance.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, rendered to milliseconds.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_ofx_date(dtime):
    """Render a datetime to the OFX format.

    Args:
      dtime: A datetime.datetime instance.
    Returns:
      A string, rendered to milliseconds.
    """
    return '{}.{:03d}'.format(dtime.strftime('%Y%m%d%H%M%S'),
                              int(dtime.microsecond / 1000))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.export_reports_test">
<code>export_reports_test</code>
<a class="headerlink" href="#beancount.reports.export_reports_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.export_reports_test.TestHoldingsReports">
<code>TestHoldingsReports</code>
<a class="headerlink" href="#beancount.reports.export_reports_test.TestHoldingsReports" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.export_reports_test.TestHoldingsReports.setUp">
<code class="highlight language-python">
setUp
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.export_reports_test.TestHoldingsReports.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/export_reports_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc()
def setUp(self, entries, errors, options_map):
    """
    2014-01-01 open Assets:Bank1
    2014-01-01 open Assets:Bank2
    2014-01-01 open Assets:Bank3
    2014-01-01 open Income:Something

    2014-05-31 *
      Assets:Bank1         100 MSFT {200.01 USD}
      Income:Something

    2014-05-31 *
      Assets:Bank2         1000 INR @ 200 USD
      Income:Something
    """
    self.entries = entries
    self.errors = errors
    self.options_map = options_map
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.gviz">
<code>gviz</code>
<a class="headerlink" href="#beancount.reports.gviz" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Support for creating Google gviz timeline charts.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.gviz.gviz_timeline">
<code class="highlight language-python">
gviz_timeline
(time_array, data_array_map, css_id='chart')

        </code>
<a class="headerlink" href="#beancount.reports.gviz.gviz_timeline" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Create a HTML rendering of the given arrays.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>time_array</code></td>
<td><code></code></td>
<td>
<p>A sequence of datetime objects.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>data_array_map</code></td>
<td><code></code></td>
<td>
<p>A dict or list of items of name to
              sequence of data points.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>css_id</code></td>
<td><code></code></td>
<td>
<p>A string, the CSS id attribute of the target node.</p>
</td>
<td><code>'chart'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>Javascript code for rendering the chart. (It's up to you to
insert the a div with the correct CSS id in your accompanying
HTML page.)</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/gviz.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def gviz_timeline(time_array, data_array_map, css_id='chart'):
    """Create a HTML rendering of the given arrays.

    Args:
      time_array: A sequence of datetime objects.
      data_array_map: A dict or list of items of name to
                      sequence of data points.
      css_id: A string, the CSS id attribute of the target node.
    Returns:
      Javascript code for rendering the chart. (It's up to you to
      insert the a div with the correct CSS id in your accompanying
      HTML page.)
    """
    # Set the order of the data to be output.
    if isinstance(data_array_map, dict):
        data_array_map = list(data_array_map.items())

    # Write preamble.
    oss = io.StringIO()

    oss.write('&lt;script src="https://www.google.com/jsapi" type="text/javascript"&gt;'
              '&lt;/script&gt;\n')
    oss.write('&lt;script type="text/javascript"&gt;\n')

    oss.write("""\
      google.load('visualization', '1', {packages: ['annotatedtimeline']});
      function draw() {
        var data = new google.visualization.DataTable();
      """)

    # Declare columns.
    oss.write("data.addColumn('{}', '{}');\n".format('datetime', 'Time'))
    for name, _ in data_array_map:
        oss.write("data.addColumn('{}', '{}');\n".format('number', name))

    # Render the rows.
    oss.write('data.addRows([\n')

    datalists = [x[1] for x in data_array_map]

    for dtime, datas in zip(time_array, zip(*datalists)):
        js_datetime = ('Date({0.year}, {0.month}, {0.day})').format(dtime)
        oss.write('  [new {}, {}],\n'.format(js_datetime, ', '.join(map(str, datas))))
    oss.write(']);\n')

    oss.write("""
        var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
            document.getElementById('{css_id}')
        );

        var options = {{
          'legendPosition'    : 'newRow',
          'displayAnnotations': true,
        }};

        annotatedtimeline.draw(data, options);
      }}

      google.setOnLoadCallback(draw);
    """.format(css_id=css_id))

    oss.write('&lt;/script&gt;\n')

    return oss.getvalue()
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.holdings_reports">
<code>holdings_reports</code>
<a class="headerlink" href="#beancount.reports.holdings_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Generate reports no holdings.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.CashReport">
<code>CashReport</code>
<a class="headerlink" href="#beancount.reports.holdings_reports.CashReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>The list of cash holdings (defined as currency = cost-currency).</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.holdings_reports.CashReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.holdings_reports.CashReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-c', '--currency',
                        action='store', default=None,
                        help="Which currency to convert all the holdings to")

    parser.add_argument('-i', '--ignored',
                        action='store_true',
                        help="Report on ignored holdings instead of included ones")

    parser.add_argument('-o', '--operating-only',
                        action='store_true',
                        help="Only report on operating currencies")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.holdings_reports.CashReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.CashReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    holdings_list, price_map = get_assets_holdings(entries, options_map)
    holdings_list_orig = holdings_list

    # Keep only the holdings where currency is the same as the cost-currency.
    holdings_list = [holding
                     for holding in holdings_list
                     if (holding.currency == holding.cost_currency or
                         holding.cost_currency is None)]

    # Keep only those holdings held in one of the operating currencies.
    if self.args.operating_only:
        operating_currencies = set(options_map['operating_currency'])
        holdings_list = [holding
                         for holding in holdings_list
                         if holding.currency in operating_currencies]

    # Compute the list of ignored holdings and optionally report on them.
    if self.args.ignored:
        ignored_holdings = set(holdings_list_orig) - set(holdings_list)
        holdings_list = ignored_holdings

    # Convert holdings to a unified currency.
    if self.args.currency:
        holdings_list = holdings.convert_to_currency(price_map, self.args.currency,
                                                     holdings_list)

    return table.create_table(holdings_list, FIELD_SPEC)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.HoldingsReport">
<code>HoldingsReport</code>
<a class="headerlink" href="#beancount.reports.holdings_reports.HoldingsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>The full list of holdings for Asset and Liabilities accounts.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.holdings_reports.HoldingsReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.holdings_reports.HoldingsReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-c', '--currency',
                        action='store', default=None,
                        help="Which currency to convert all the holdings to")

    parser.add_argument('-r', '--relative',
                        action='store_true',
                        help="True if we should render as relative values only")

    parser.add_argument('-g', '--groupby', '--by',
                        action='store', default=None,
                        choices=cls.aggregations.keys(),
                        help="How to group the holdings (default is: don't group)")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.holdings_reports.HoldingsReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.HoldingsReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    keywords = self.aggregations[self.args.groupby] if self.args.groupby else {}
    return report_holdings(self.args.currency, self.args.relative,
                           entries, options_map,
                           **keywords)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.NetWorthReport">
<code>NetWorthReport</code>
<a class="headerlink" href="#beancount.reports.holdings_reports.NetWorthReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Generate a table of total net worth for each operating currency.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.holdings_reports.NetWorthReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.NetWorthReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    holdings_list, price_map = get_assets_holdings(entries, options_map)

    net_worths = []
    for currency in options_map['operating_currency']:

        # Convert holdings to a unified currency.
        #
        # Note: It's entirely possible that the price map does not have all
        # the necessary rate conversions here. The resulting holdings will
        # simply have no cost when that is the case. We must handle this
        # gracefully below.
        currency_holdings_list = holdings.convert_to_currency(price_map,
                                                              currency,
                                                              holdings_list)
        if not currency_holdings_list:
            continue

        holdings_list = holdings.aggregate_holdings_by(
            currency_holdings_list, lambda holding: holding.cost_currency)

        holdings_list = [holding
                         for holding in holdings_list
                         if holding.currency and holding.cost_currency]

        # If after conversion there are no valid holdings, skip the currency
        # altogether.
        if not holdings_list:
            continue

        net_worths.append((currency, holdings_list[0].market_value))

    field_spec = [
        (0, 'Currency'),
        (1, 'Net Worth', '{:,.2f}'.format),
    ]
    return table.create_table(net_worths, field_spec)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.get_assets_holdings">
<code class="highlight language-python">
get_assets_holdings
(entries, options_map, currency=None)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.get_assets_holdings" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Return holdings for all assets and liabilities.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of parsed options.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>currency</code></td>
<td><code></code></td>
<td>
<p>If specified, a string, the target currency to convert all
holding values to.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A list of Holding instances and a price-map.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_assets_holdings(entries, options_map, currency=None):
    """Return holdings for all assets and liabilities.

    Args:
      entries: A list of directives.
      options_map: A dict of parsed options.
      currency: If specified, a string, the target currency to convert all
        holding values to.
    Returns:
      A list of Holding instances and a price-map.
    """
    # Compute a price map, to perform conversions.
    price_map = prices.build_price_map(entries)

    # Get the list of holdings.
    account_types = options.get_account_types(options_map)
    holdings_list = holdings.get_final_holdings(entries,
                                                (account_types.assets,
                                                 account_types.liabilities),
                                                price_map)

    # Convert holdings to a unified currency.
    if currency:
        holdings_list = holdings.convert_to_currency(price_map, currency, holdings_list)

    return holdings_list, price_map
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.get_holdings_entries">
<code class="highlight language-python">
get_holdings_entries
(entries, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.get_holdings_entries" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Summarizes the entries to list of entries representing the final holdings..</p>
<p>This list includes the latest prices entries as well. This can be used to
load a full snapshot of holdings without including the entire history. This
is a way of summarizing a balance sheet in a way that filters away history.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of parsed options.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, the entries to print out.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_holdings_entries(entries, options_map):
    """Summarizes the entries to list of entries representing the final holdings..

    This list includes the latest prices entries as well. This can be used to
    load a full snapshot of holdings without including the entire history. This
    is a way of summarizing a balance sheet in a way that filters away history.

    Args:
      entries: A list of directives.
      options_map: A dict of parsed options.
    Returns:
      A string, the entries to print out.
    """

    # The entries will be created at the latest date, against an equity account.
    latest_date = entries[-1].date
    _, equity_account, _ = options.get_previous_accounts(options_map)

    # Get all the assets.
    holdings_list, _ = get_assets_holdings(entries, options_map)

    # Create synthetic entries for them.
    holdings_entries = []

    for index, holding in enumerate(holdings_list):
        meta = data.new_metadata('report_holdings_print', index)
        entry = data.Transaction(meta, latest_date, flags.FLAG_SUMMARIZE,
                                 None, "", None, None, [])

        # Convert the holding to a position.
        pos = holdings.holding_to_position(holding)
        entry.postings.append(
            data.Posting(holding.account, pos.units, pos.cost, None, None, None))

        cost = -convert.get_cost(pos)
        entry.postings.append(
            data.Posting(equity_account, cost, None, None, None, None))

        holdings_entries.append(entry)

    # Get opening directives for all the accounts.
    used_accounts = {holding.account for holding in holdings_list}
    open_entries = summarize.get_open_entries(entries, latest_date)
    used_open_entries = [open_entry
                         for open_entry in open_entries
                         if open_entry.account in used_accounts]

    # Add an entry for the equity account we're using.
    meta = data.new_metadata('report_holdings_print', -1)
    used_open_entries.insert(0, data.Open(meta, latest_date, equity_account,
                                          None, None))

    # Get the latest price entries.
    price_entries = prices.get_last_price_entries(entries, None)

    return used_open_entries + holdings_entries + price_entries
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.load_from_csv">
<code class="highlight language-python">
load_from_csv
(fileobj)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.load_from_csv" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Load a list of holdings from a CSV file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fileobj</code></td>
<td><code></code></td>
<td>
<p>A file object.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Yields:
  Instances of Holding, as read from the file.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def load_from_csv(fileobj):
    """Load a list of holdings from a CSV file.

    Args:
      fileobj: A file object.
    Yields:
      Instances of Holding, as read from the file.
    """
    column_spec = [
        ('Account', 'account', None),
        ('Units', 'number', D),
        ('Currency', 'currency', None),
        ('Cost Currency', 'cost_currency', None),
        ('Average Cost', 'cost_number', D),
        ('Price', 'price_number', D),
        ('Book Value', 'book_value', D),
        ('Market Value', 'market_value', D),
        ('Price Date', 'price_date', None),
        ]
    column_dict = {name: (attr, converter)
                   for name, attr, converter in column_spec}
    klass = holdings.Holding

    # Create a set of default values for the namedtuple.
    defaults_dict = {attr: None for attr in klass._fields}

    # Start reading the file.
    reader = csv.reader(fileobj)

    # Check that the header is readable.
    header = next(reader)
    attr_converters = []
    for header_name in header:
        try:
            attr_converter = column_dict[header_name]
            attr_converters.append(attr_converter)
        except KeyError:
            raise IOError("Invalid file contents for holdings")

    for line in reader:
        value_dict = defaults_dict.copy()
        for (attr, converter), value in zip(attr_converters, line):
            if converter:
                value = converter(value)
            value_dict[attr] = value
        yield holdings.Holding(**value_dict)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports.report_holdings">
<code class="highlight language-python">
report_holdings
(currency, relative, entries, options_map, aggregation_key=None, sort_key=None)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports.report_holdings" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Generate a detailed list of all holdings.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>currency</code></td>
<td><code></code></td>
<td>
<p>A string, a currency to convert to. If left to None, no
conversion is carried out.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>relative</code></td>
<td><code></code></td>
<td>
<p>A boolean, true if we should reduce this to a relative value.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of parsed options.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>aggregation_key</code></td>
<td><code></code></td>
<td>
<p>A callable use to generate aggregations.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>sort_key</code></td>
<td><code></code></td>
<td>
<p>A function to use to sort the holdings, if specified.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A Table instance.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def report_holdings(currency, relative, entries, options_map,
                    aggregation_key=None,
                    sort_key=None):
    """Generate a detailed list of all holdings.

    Args:
      currency: A string, a currency to convert to. If left to None, no
        conversion is carried out.
      relative: A boolean, true if we should reduce this to a relative value.
      entries: A list of directives.
      options_map: A dict of parsed options.
      aggregation_key: A callable use to generate aggregations.
      sort_key: A function to use to sort the holdings, if specified.
    Returns:
      A Table instance.
    """
    holdings_list, _ = get_assets_holdings(entries, options_map, currency)
    if aggregation_key:
        holdings_list = holdings.aggregate_holdings_by(holdings_list, aggregation_key)

    if relative:
        holdings_list = holdings.reduce_relative(holdings_list)
        field_spec = RELATIVE_FIELD_SPEC
    else:
        field_spec = FIELD_SPEC

    if sort_key:
        holdings_list.sort(key=sort_key, reverse=True)

    return table.create_table(holdings_list, field_spec)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.holdings_reports_test">
<code>holdings_reports_test</code>
<a class="headerlink" href="#beancount.reports.holdings_reports_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.holdings_reports_test.TestHoldingsReports">
<code>TestHoldingsReports</code>
<a class="headerlink" href="#beancount.reports.holdings_reports_test.TestHoldingsReports" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.holdings_reports_test.TestHoldingsReports.setUp">
<code class="highlight language-python">
setUp
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.holdings_reports_test.TestHoldingsReports.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/holdings_reports_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc()
def setUp(self, entries, errors, options_map):
    """
    2014-01-01 open Assets:Bank1
    2014-01-01 open Assets:Bank2
    2014-01-01 open Assets:Bank3
    2014-01-01 open Income:Something

    2014-05-31 *
      Assets:Bank1         100 MSFT {200.01 USD}
      Income:Something

    2014-05-31 *
      Assets:Bank2         1000 INR @ 200 USD
      Income:Something
    """
    self.entries = entries
    self.errors = errors
    self.options_map = options_map
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.html_formatter">
<code>html_formatter</code>
<a class="headerlink" href="#beancount.reports.html_formatter" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Base class for HTML formatters.</p>
<p>This object encapsulates the rendering of various objects to HTML.
You may, and should, derive and override from this object in order to
provide links within a web interface.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter">
<code>HTMLFormatter</code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>A trivial formatter object that can be used to format strings as themselves.
    This mainly defines an interface to implement.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.__init__">
<code class="highlight language-python">
__init__
(self, dcontext)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.__init__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Create an instance of HTMLFormatter.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dcontext</code></td>
<td><code></code></td>
<td>
<p>DisplayContext to use to render the numbers.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __init__(self, dcontext):
    """Create an instance of HTMLFormatter.

    Args:
      dcontext: DisplayContext to use to render the numbers.
    """
    self._dformat = dcontext.build(
        precision=display_context.Precision.MOST_COMMON)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_account">
<code class="highlight language-python">
render_account
(self, account_name)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_account" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render an account name.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>account_name</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the account to render.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_account(self, account_name):
    """Render an account name.

    Args:
      account_name: A string, the name of the account to render.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return account_name
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_amount">
<code class="highlight language-python">
render_amount
(self, amount)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_amount" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render an amount.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>amount</code></td>
<td><code></code></td>
<td>
<p>An Amount instance.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside a table cell.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_amount(self, amount):
    """Render an amount.

    Args:
      amount: An Amount instance.
    Returns:
      A string of HTML to be spliced inside a table cell.
    """
    return amount.to_string(self._dformat)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_commodity">
<code class="highlight language-python">
render_commodity
(self, base_quote)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_commodity" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a commodity (base currency / quote currency).</p>
<p>This is only used when we want the commodity to link to its prices.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>commodity</code></td>
<td><code></code></td>
<td>
<p>A pair of strings, the base and quote currency names.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_commodity(self, base_quote):
    """Render a commodity (base currency / quote currency).

    This is only used when we want the commodity to link to its prices.

    Args:
      commodity: A pair of strings, the base and quote currency names.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return '{} / {}'.format(*base_quote)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_context">
<code class="highlight language-python">
render_context
(self, entry)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_context" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a reference to context around a transaction (maybe as an HTML link).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entry</code></td>
<td><code></code></td>
<td>
<p>A directive.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_context(self, entry):
    """Render a reference to context around a transaction (maybe as an HTML link).

    Args:
      entry: A directive.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return ''
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_doc">
<code class="highlight language-python">
render_doc
(self, filename)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_doc" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a document path.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filename</code></td>
<td><code></code></td>
<td>
<p>A string, the filename for the document.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_doc(self, filename):
    """Render a document path.

    Args:
      filename: A string, the filename for the document.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return filename
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_event_type">
<code class="highlight language-python">
render_event_type
(self, event)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_event_type" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render an event type.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the even type.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_event_type(self, event):
    """Render an event type.

    Args:
      event: A string, the name of the even type.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return event
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_inventory">
<code class="highlight language-python">
render_inventory
(self, inv)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_inventory" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render an inventory.</p>
<p>You can use this opportunity to convert the inventory to units or cost
or whatever.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>inv</code></td>
<td><code></code></td>
<td>
<p>An Inventory instance.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside a table cell.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_inventory(self, inv):
    """Render an inventory.

    You can use this opportunity to convert the inventory to units or cost
    or whatever.

    Args:
      inv: An Inventory instance.
    Returns:
      A string of HTML to be spliced inside a table cell.
    """
    return '&lt;br/&gt;'.join(position_.to_string(self._dformat)
                        for position_ in sorted(inv))
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_link">
<code class="highlight language-python">
render_link
(self, link)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_link" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a transaction link (maybe as an HTML link).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>link</code></td>
<td><code></code></td>
<td>
<p>A string, the name of the link to render.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_link(self, link):
    """Render a transaction link (maybe as an HTML link).

    Args:
      link: A string, the name of the link to render.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return link
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_number">
<code class="highlight language-python">
render_number
(self, number, currency)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_number" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a number for a currency using the formatter's display context.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>number</code></td>
<td><code></code></td>
<td>
<p>A Decimal instance, the number to be rendered.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>currency</code></td>
<td><code></code></td>
<td>
<p>A string, the commodity the number represent.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, the formatted number to render.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_number(self, number, currency):
    """Render a number for a currency using the formatter's display context.

    Args:
      number: A Decimal instance, the number to be rendered.
      currency: A string, the commodity the number represent.
    Returns:
      A string, the formatted number to render.
    """
    return self._dformat.format(number, currency)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.html_formatter.HTMLFormatter.render_source">
<code class="highlight language-python">
render_source
(self, meta)

        </code>
<a class="headerlink" href="#beancount.reports.html_formatter.HTMLFormatter.render_source" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render a reference to the source file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>meta</code></td>
<td><code></code></td>
<td>
<p>A metadata dict object.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string of HTML to be spliced inside an HTML template.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/html_formatter.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_source(self, meta):
    """Render a reference to the source file.

    Args:
      meta: A metadata dict object.
    Returns:
      A string of HTML to be spliced inside an HTML template.
    """
    return printer.render_source(meta)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.journal_html">
<code>journal_html</code>
<a class="headerlink" href="#beancount.reports.journal_html" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>HTML rendering routines for serving a lists of postings/entries.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_html.Row">
<code>Row</code>
<a class="headerlink" href="#beancount.reports.journal_html.Row" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Row(entry, leg_postings, rowtype, extra_class, flag, description, links, amount_str, balance_str)</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_html.Row.__getnewargs__">
<code class="highlight language-python">
__getnewargs__
(self)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.journal_html.Row.__getnewargs__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return self as a plain tuple.  Used by copy and pickle.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __getnewargs__(self):
    'Return self as a plain tuple.  Used by copy and pickle.'
    return _tuple(self)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_html.Row.__new__">
<code class="highlight language-python">
__new__
(_cls, entry, leg_postings, rowtype, extra_class, flag, description, links, amount_str, balance_str)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
<small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.journal_html.Row.__new__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Create new instance of Row(entry, leg_postings, rowtype, extra_class, flag, description, links, amount_str, balance_str)</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_html.Row.__repr__">
<code class="highlight language-python">
__repr__
(self)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.journal_html.Row.__repr__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return a nicely formatted representation string</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __repr__(self):
    'Return a nicely formatted representation string'
    return self.__class__.__name__ + repr_fmt % self
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_html.html_entries_table">
<code class="highlight language-python">
html_entries_table
(oss, txn_postings, formatter, render_postings=True)

        </code>
<a class="headerlink" href="#beancount.reports.journal_html.html_entries_table" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a list of entries into an HTML table, with no running balance.</p>
<p>This is appropriate for rendering tables of entries for postings with
multiple accounts, whereby computing the running balances makes little
sense.</p>
<p>(This function returns nothing, it write to oss as a side-effect.)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>oss</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>txn_postings</code></td>
<td><code></code></td>
<td>
<p>A list of Posting or directive instances.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>formatter</code></td>
<td><code></code></td>
<td>
<p>An instance of HTMLFormatter, to be render accounts,
inventories, links and docs.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>render_postings</code></td>
<td><code></code></td>
<td>
<p>A boolean; if true, render the postings as rows under the
main transaction row.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def html_entries_table(oss, txn_postings, formatter, render_postings=True):
    """Render a list of entries into an HTML table, with no running balance.

    This is appropriate for rendering tables of entries for postings with
    multiple accounts, whereby computing the running balances makes little
    sense.

    (This function returns nothing, it write to oss as a side-effect.)

    Args:
      oss: A file object to write the output to.
      txn_postings: A list of Posting or directive instances.
      formatter: An instance of HTMLFormatter, to be render accounts,
        inventories, links and docs.
      render_postings: A boolean; if true, render the postings as rows under the
        main transaction row.
    """
    write = lambda data: (oss.write(data), oss.write('\n'))

    write('''
      &lt;table class="entry-table"&gt;
      &lt;thead&gt;
        &lt;tr&gt;
         &lt;th class="datecell"&gt;Date&lt;/th&gt;
         &lt;th class="flag"&gt;F&lt;/th&gt;
         &lt;th class="description"&gt;Narration/Payee&lt;/th&gt;
         &lt;th class="amount"&gt;Amount&lt;/th&gt;
         &lt;th class="cost"&gt;Cost&lt;/th&gt;
         &lt;th class="price"&gt;Price&lt;/th&gt;
         &lt;th class="balance"&gt;Balance&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
    ''')

    for row in iterate_html_postings(txn_postings, formatter):
        entry = row.entry

        description = row.description
        if row.links:
            description += render_links(row.links)

        # Render a row.
        write('''
          &lt;tr class="{} {}" title="{}"&gt;
            &lt;td class="datecell"&gt;&lt;a href="{}"&gt;{}&lt;/a&gt;&lt;/td&gt;
            &lt;td class="flag"&gt;{}&lt;/td&gt;
            &lt;td class="description" colspan="5"&gt;{}&lt;/td&gt;
          &lt;/tr&gt;
        '''.format(row.rowtype, row.extra_class,
                   '{}:{}'.format(entry.meta["filename"], entry.meta["lineno"]),
                   formatter.render_context(entry), entry.date,
                   row.flag, description))

        if render_postings and isinstance(entry, data.Transaction):
            for posting in entry.postings:

                classes = ['Posting']
                if posting.flag == flags.FLAG_WARNING:
                    classes.append('warning')

                write('''
                  &lt;tr class="{}"&gt;
                    &lt;td class="datecell"&gt;&lt;/td&gt;
                    &lt;td class="flag"&gt;{}&lt;/td&gt;
                    &lt;td class="description"&gt;{}&lt;/td&gt;
                    &lt;td class="amount num"&gt;{}&lt;/td&gt;
                    &lt;td class="cost num"&gt;{}&lt;/td&gt;
                    &lt;td class="price num"&gt;{}&lt;/td&gt;
                    &lt;td class="balance num"&gt;{}&lt;/td&gt;
                  &lt;/tr&gt;
                '''.format(' '.join(classes),
                           posting.flag or '',
                           formatter.render_account(posting.account),
                           posting.units or '',
                           posting.cost or '',
                           posting.price or '',
                           convert.get_weight(posting)))

    write('&lt;/table&gt;')
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_html.html_entries_table_with_balance">
<code class="highlight language-python">
html_entries_table_with_balance
(oss, txn_postings, formatter, render_postings=True)

        </code>
<a class="headerlink" href="#beancount.reports.journal_html.html_entries_table_with_balance" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a list of entries into an HTML table, with a running balance.</p>
<p>(This function returns nothing, it write to oss as a side-effect.)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>oss</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>txn_postings</code></td>
<td><code></code></td>
<td>
<p>A list of Posting or directive instances.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>formatter</code></td>
<td><code></code></td>
<td>
<p>An instance of HTMLFormatter, to be render accounts,
inventories, links and docs.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>render_postings</code></td>
<td><code></code></td>
<td>
<p>A boolean; if true, render the postings as rows under the
main transaction row.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def html_entries_table_with_balance(oss, txn_postings, formatter, render_postings=True):
    """Render a list of entries into an HTML table, with a running balance.

    (This function returns nothing, it write to oss as a side-effect.)

    Args:
      oss: A file object to write the output to.
      txn_postings: A list of Posting or directive instances.
      formatter: An instance of HTMLFormatter, to be render accounts,
        inventories, links and docs.
      render_postings: A boolean; if true, render the postings as rows under the
        main transaction row.
    """
    write = lambda data: (oss.write(data), oss.write('\n'))

    write('''
      &lt;table class="entry-table"&gt;
      &lt;thead&gt;
        &lt;tr&gt;
         &lt;th class="datecell"&gt;Date&lt;/th&gt;
         &lt;th class="flag"&gt;F&lt;/th&gt;
         &lt;th class="description"&gt;Narration/Payee&lt;/th&gt;
         &lt;th class="position"&gt;Position&lt;/th&gt;
         &lt;th class="price"&gt;Price&lt;/th&gt;
         &lt;th class="cost"&gt;Cost&lt;/th&gt;
         &lt;th class="change"&gt;Change&lt;/th&gt;
         &lt;th class="balance"&gt;Balance&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
    ''')

    for row in iterate_html_postings(txn_postings, formatter):
        entry = row.entry

        description = row.description
        if row.links:
            description += render_links(row.links)

        # Render a row.
        write('''
          &lt;tr class="{} {}" title="{}"&gt;
            &lt;td class="datecell"&gt;&lt;a href="{}"&gt;{}&lt;/a&gt;&lt;/td&gt;
            &lt;td class="flag"&gt;{}&lt;/td&gt;
            &lt;td class="description" colspan="4"&gt;{}&lt;/td&gt;
            &lt;td class="change num"&gt;{}&lt;/td&gt;
            &lt;td class="balance num"&gt;{}&lt;/td&gt;
          &lt;/tr&gt;
        '''.format(row.rowtype, row.extra_class,
                   '{}:{}'.format(entry.meta["filename"], entry.meta["lineno"]),
                   formatter.render_context(entry), entry.date,
                   row.flag, description,
                   row.amount_str, row.balance_str))

        if render_postings and isinstance(entry, data.Transaction):
            for posting in entry.postings:

                classes = ['Posting']
                if posting.flag == flags.FLAG_WARNING:
                    classes.append('warning')
                if posting in row.leg_postings:
                    classes.append('leg')

                write('''
                  &lt;tr class="{}"&gt;
                    &lt;td class="datecell"&gt;&lt;/td&gt;
                    &lt;td class="flag"&gt;{}&lt;/td&gt;
                    &lt;td class="description"&gt;{}&lt;/td&gt;
                    &lt;td class="position num"&gt;{}&lt;/td&gt;
                    &lt;td class="price num"&gt;{}&lt;/td&gt;
                    &lt;td class="cost num"&gt;{}&lt;/td&gt;
                    &lt;td class="change num"&gt;&lt;/td&gt;
                    &lt;td class="balance num"&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                '''.format(' '.join(classes),
                           posting.flag or '',
                           formatter.render_account(posting.account),
                           position.to_string(posting),
                           posting.price or '',
                           convert.get_weight(posting)))

    write('&lt;/table&gt;')
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_html.iterate_html_postings">
<code class="highlight language-python">
iterate_html_postings
(txn_postings, formatter)

        </code>
<a class="headerlink" href="#beancount.reports.journal_html.iterate_html_postings" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Iterate through the list of transactions with rendered HTML strings for each cell.</p>
<p>This pre-renders all the data for each row to HTML. This is reused by the entries
table rendering routines.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>txn_postings</code></td>
<td><code></code></td>
<td>
<p>A list of TxnPosting or directive instances.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>formatter</code></td>
<td><code></code></td>
<td>
<p>An instance of HTMLFormatter, to be render accounts,
inventories, links and docs.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Yields:
  Instances of Row tuples. See above.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def iterate_html_postings(txn_postings, formatter):
    """Iterate through the list of transactions with rendered HTML strings for each cell.

    This pre-renders all the data for each row to HTML. This is reused by the entries
    table rendering routines.

    Args:
      txn_postings: A list of TxnPosting or directive instances.
      formatter: An instance of HTMLFormatter, to be render accounts,
        inventories, links and docs.
    Yields:
      Instances of Row tuples. See above.
    """
    for entry_line in realization.iterate_with_balance(txn_postings):
        entry, leg_postings, change, entry_balance = entry_line

        # Prepare the data to be rendered for this row.
        balance_str = formatter.render_inventory(entry_balance)

        rowtype = entry.__class__.__name__
        flag = ''
        extra_class = ''
        links = None

        if isinstance(entry, data.Transaction):
            rowtype = FLAG_ROWTYPES.get(entry.flag, 'Transaction')
            extra_class = 'warning' if entry.flag == flags.FLAG_WARNING else ''
            flag = entry.flag
            description = '&lt;span class="narration"&gt;{}&lt;/span&gt;'.format(entry.narration)
            if entry.payee:
                description = ('&lt;span class="payee"&gt;{}&lt;/span&gt;'
                               '&lt;span class="pnsep"&gt;|&lt;/span&gt;'
                               '{}').format(entry.payee, description)
            amount_str = formatter.render_inventory(change)

            if entry.links and formatter:
                links = [formatter.render_link(link) for link in entry.links]

        elif isinstance(entry, data.Balance):
            # Check the balance here and possibly change the rowtype
            if entry.diff_amount is None:
                description = 'Balance {} has {}'.format(
                    formatter.render_account(entry.account),
                    entry.amount)
            else:
                description = ('Balance in {} fails; '
                               'expected = {}, balance = {}, difference = {}').format(
                                   formatter.render_account(entry.account),
                                   entry.amount,
                                   entry_balance.get_currency_units(entry.amount.currency),
                                   entry.diff_amount)
                extra_class = 'fail'

            amount_str = formatter.render_amount(entry.amount)

        elif isinstance(entry, (data.Open, data.Close)):
            description = '{} {}'.format(entry.__class__.__name__,
                                         formatter.render_account(entry.account))
            amount_str = ''

        elif isinstance(entry, data.Note):
            description = '{} {}'.format(entry.__class__.__name__, entry.comment)
            amount_str = ''
            balance_str = ''

        elif isinstance(entry, data.Document):
            assert path.isabs(entry.filename)
            description = 'Document for {}: {}'.format(
                formatter.render_account(entry.account),
                formatter.render_doc(entry.filename))
            amount_str = ''
            balance_str = ''

        else:
            description = entry.__class__.__name__
            amount_str = ''
            balance_str = ''

        yield Row(entry, leg_postings,
                  rowtype, extra_class,
                  flag, description, links, amount_str, balance_str)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_html.render_links">
<code class="highlight language-python">
render_links
(links)

        </code>
<a class="headerlink" href="#beancount.reports.journal_html.render_links" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render Transaction links to HTML.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>links</code></td>
<td><code></code></td>
<td>
<p>A list of set of strings, transaction "links" to be rendered.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, a snippet of HTML to be rendering somewhere.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_links(links):
    """Render Transaction links to HTML.

    Args:
      links: A list of set of strings, transaction "links" to be rendered.
    Returns:
      A string, a snippet of HTML to be rendering somewhere.
    """
    return '&lt;span class="links"&gt;{}&lt;/span&gt;'.format(
        ''.join('&lt;a href="{}"&gt;^&lt;/a&gt;'.format(link)
                for link in links))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.journal_html_test">
<code>journal_html_test</code>
<a class="headerlink" href="#beancount.reports.journal_html_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_html_test.TestJournalRender">
<code>TestJournalRender</code>
<a class="headerlink" href="#beancount.reports.journal_html_test.TestJournalRender" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_html_test.TestJournalRender.setUp">
<code class="highlight language-python">
setUp
(self, entries, _, __)

        </code>
<a class="headerlink" href="#beancount.reports.journal_html_test.TestJournalRender.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_html_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc(expect_errors=True)
def setUp(self, entries, _, __):
    """
    2014-01-01 open Assets:Checking
    2014-01-01 open Assets:Investing
    2014-01-01 open Assets:Savings
    2014-01-01 open Income:MountainOfMoney
    2014-01-01 open Equity:Opening-Balances
    2014-01-01 open Assets:Investing:Cash
    2014-01-01 open Assets:Investing:Stock

    2014-01-05 pad Assets:Checking Equity:Opening-Balances

    2014-02-10 balance Assets:Checking   100.00 USD

    2014-03-04 ! "Salary"
      Income:MountainOfMoney    -4000.00 USD
      Assets:Checking

    2014-03-05 balance Assets:Checking   4100.00 USD

    2014-03-10 note Assets:Checking "Something to say"
    2014-03-11 document Assets:Checking "/path/to/document.pdf"

    ;; With link.
    2014-03-17 * "Transfer" ^784375fd5a68
      Assets:Checking          -2000 USD
      Assets:Checking          -1500 USD
      Assets:Investing:Cash     3500 USD

    2014-03-25 * "Investment"
      Assets:Investing:Cash      -3000 USD
      Assets:Investing:Stock        30 STOCK {100 USD}

    ;; Failing.
    2014-05-01 balance  Assets:Checking   0.00 USD

    2014-12-31 close Assets:Checking
    """
    self.entries = entries
    real_root = realization.realize(self.entries)
    self.real_account = realization.get(real_root, 'Assets:Checking')
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.journal_reports">
<code>journal_reports</code>
<a class="headerlink" href="#beancount.reports.journal_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Report classes for all reports that display ending journals of accounts.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_reports.ConversionsReport">
<code>ConversionsReport</code>
<a class="headerlink" href="#beancount.reports.journal_reports.ConversionsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out a report of all conversions.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_reports.DocumentsReport">
<code>DocumentsReport</code>
<a class="headerlink" href="#beancount.reports.journal_reports.DocumentsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out a report of documents.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_reports.JournalReport">
<code>JournalReport</code>
<a class="headerlink" href="#beancount.reports.journal_reports.JournalReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out an account register/journal.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_reports.JournalReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.journal_reports.JournalReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-a', '--account',
                        action='store', default=None,
                        help="Account to render")

    parser.add_argument('-w', '--width', action='store', type=int, default=0,
                        help="The number of characters wide to render the report to")

    parser.add_argument('-k', '--precision', action='store', type=int, default=2,
                        help="The number of digits to render after the period")

    parser.add_argument('-b', '--render-balance', '--balance', action='store_true',
                        help="Render a running balance, not just changes")

    parser.add_argument('-c', '--at-cost', '--cost', action='store_true',
                        help="Render values at cost, convert the units to cost value")

    parser.add_argument('-x', '--compact', dest='verbosity', action='store_const',
                        const=journal_text.COMPACT, default=journal_text.NORMAL,
                        help="Rendering compactly")

    parser.add_argument('-X', '--verbose', dest='verbosity', action='store_const',
                        const=journal_text.VERBOSE,
                        help="Rendering verbosely")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_reports.JournalReport.get_postings">
<code class="highlight language-python">
get_postings
(self, real_root)

        </code>
<a class="headerlink" href="#beancount.reports.journal_reports.JournalReport.get_postings" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return the postings corresponding to the account filter option.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>A RealAccount node for the root of all accounts.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A list of posting or directive instances.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_postings(self, real_root):
    """Return the postings corresponding to the account filter option.

    Args:
      real_root: A RealAccount node for the root of all accounts.
    Returns:
      A list of posting or directive instances.
    """
    if self.args.account:
        real_account = realization.get(real_root, self.args.account)
        if real_account is None:
            # If the account isn't found, return an empty list of postings.
            # Note that this used to return the following error.
            # raise base.ReportError(
            #     "Invalid account name: {}".format(self.args.account))
            return []
    else:
        real_account = real_root

    return realization.get_postings(real_account)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_reports.JournalReport.render_real_html">
<code class="highlight language-python">
render_real_html
(cls, real_root, price_map, price_date, options_map, file)

        </code>
<a class="headerlink" href="#beancount.reports.journal_reports.JournalReport.render_real_html" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Wrap an htmldiv into our standard HTML template.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A price database.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A date for evaluating prices.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict, options as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_real_html(cls, real_root, price_map, price_date, options_map, file):
    """Wrap an htmldiv into our standard HTML template.

    Args:
      real_root: An instance of RealAccount.
      price_map: A price database.
      price_date: A date for evaluating prices.
      options_map: A dict, options as produced by the parser.
      file: A file object to write the output to.
    """
    template = get_html_template()
    oss = io.StringIO()
    cls.render_real_htmldiv(real_root, price_map, price_date, options_map, oss)
    file.write(template.format(body=oss.getvalue(),
                               title=''))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.journal_text">
<code>journal_text</code>
<a class="headerlink" href="#beancount.reports.journal_text" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Text rendering routines for serving a lists of postings/entries.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_text.AmountColumnSizer">
<code>AmountColumnSizer</code>
<a class="headerlink" href="#beancount.reports.journal_text.AmountColumnSizer" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>A class that computes minimal sizes for columns of numbers and their currencies.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_text.AmountColumnSizer.get_format">
<code class="highlight language-python">
get_format
(self, precision)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.AmountColumnSizer.get_format" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return a format string for the column of numbers.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>precision</code></td>
<td><code></code></td>
<td>
<p>An integer, the number of digits to render after the period.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A new-style Python format string, with PREFIX_number and PREFIX_currency named
fields.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_format(self, precision):
    """Return a format string for the column of numbers.

    Args:
      precision: An integer, the number of digits to render after the period.
    Returns:
      A new-style Python format string, with PREFIX_number and PREFIX_currency named
      fields.
    """
    return ('{{0:&gt;{width:d}.{precision:d}f}} {{1:&lt;{currency_width}}}').format(
        width=1 + self.get_number_width() + 1 + precision,
        precision=precision,
        currency_width=self.max_currency_width)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_text.AmountColumnSizer.get_generic_format">
<code class="highlight language-python">
get_generic_format
(self, precision)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.AmountColumnSizer.get_generic_format" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return a generic format string for rendering as wide as required.
This can be used to render an empty string in-lieu of a number.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>precision</code></td>
<td><code></code></td>
<td>
<p>An integer, the number of digits to render after the period.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A new-style Python format string, with PREFIX_number and PREFIX_currency named
fields.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_generic_format(self, precision):
    """Return a generic format string for rendering as wide as required.
    This can be used to render an empty string in-lieu of a number.

    Args:
      precision: An integer, the number of digits to render after the period.
    Returns:
      A new-style Python format string, with PREFIX_number and PREFIX_currency named
      fields.
    """
    return '{{{prefix}:&lt;{width}}}'.format(
        prefix=self.prefix,
        width=1 + self.get_number_width() + 1 + precision + 1 + self.max_currency_width)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_text.AmountColumnSizer.get_number_width">
<code class="highlight language-python">
get_number_width
(self)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.AmountColumnSizer.get_number_width" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return the width of the integer part of the max number.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An integer, the number of digits required to render the integral part.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_number_width(self):
    """Return the width of the integer part of the max number.

    Returns:
      An integer, the number of digits required to render the integral part.
    """
    return ((math.floor(math.log10(self.max_number)) + 1)
            if self.max_number &gt; 0
            else 1)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_text.AmountColumnSizer.update">
<code class="highlight language-python">
update
(self, number, currency)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.AmountColumnSizer.update" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Update the sizer with the given number and currency.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>number</code></td>
<td><code></code></td>
<td>
<p>A Decimal instance.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>currency</code></td>
<td><code></code></td>
<td>
<p>A string, the currency to render for it.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def update(self, number, currency):
    """Update the sizer with the given number and currency.

    Args:
      number: A Decimal instance.
      currency: A string, the currency to render for it.
    """
    abs_number = abs(number)
    if abs_number &gt; self.max_number:
        self.max_number = abs_number
    currency_width = len(currency)
    if currency_width &gt; self.max_currency_width:
        self.max_currency_width = currency_width
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_text.get_entry_text_description">
<code class="highlight language-python">
get_entry_text_description
(entry)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.get_entry_text_description" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Return the text of a description.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entry</code></td>
<td><code></code></td>
<td>
<p>A directive, of any type.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string to use for the filling the description field in text reports.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_entry_text_description(entry):
    """Return the text of a description.

    Args:
      entry: A directive, of any type.
    Returns:
      A string to use for the filling the description field in text reports.
    """
    if isinstance(entry, data.Transaction):
        description = ' | '.join([field
                                  for field in [entry.payee, entry.narration]
                                  if field is not None])
    elif isinstance(entry, data.Balance):
        if entry.diff_amount is None:
            description = 'PASS - In {}'.format(entry.account)
        else:
            description = ('FAIL - In {}; '
                           'expected = {}, difference = {}').format(
                               entry.account,
                               entry.amount,
                               entry.diff_amount)
    elif isinstance(entry, (data.Open, data.Close)):
        description = entry.account
    elif isinstance(entry, data.Note):
        description = entry.comment
    elif isinstance(entry, data.Document):
        description = entry.filename
    else:
        description = '-'
    return description
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_text.render_posting">
<code class="highlight language-python">
render_posting
(posting, number_format)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.render_posting" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a posting compactly, for text report rendering.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>posting</code></td>
<td><code></code></td>
<td>
<p>An instance of Posting.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, the rendered posting.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_posting(posting, number_format):
    """Render a posting compactly, for text report rendering.

    Args:
      posting: An instance of Posting.
    Returns:
      A string, the rendered posting.
    """
    # Note: there's probably no need to redo the work of rendering here... see
    # if you can't just simply replace this by Position.to_string().

    units = posting.units
    strings = [
        posting.flag if posting.flag else ' ',
        '{:32}'.format(posting.account),
        number_format.format(units.number, units.currency)
        ]

    cost = posting.cost
    if cost:
        strings.append('{{{}}}'.format(number_format.format(cost.number,
                                                            cost.currency).strip()))

    price = posting.price
    if price:
        strings.append('@ {}'.format(number_format.format(price.number,
                                                          price.currency).strip()))

    return ' '.join(strings)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_text.size_and_render_amounts">
<code class="highlight language-python">
size_and_render_amounts
(postings, at_cost, render_balance)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.size_and_render_amounts" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Iterate through postings and compute sizers and render amounts.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>postings</code></td>
<td><code></code></td>
<td>
<p>A list of Posting or directive instances.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>at_cost</code></td>
<td><code></code></td>
<td>
<p>A boolean, if true, render the cost value, not the actual.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>render_balance</code></td>
<td><code></code></td>
<td>
<p>A boolean, if true, renders a running balance column.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def size_and_render_amounts(postings, at_cost, render_balance):
    """Iterate through postings and compute sizers and render amounts.

    Args:
      postings: A list of Posting or directive instances.
      at_cost: A boolean, if true, render the cost value, not the actual.
      render_balance: A boolean, if true, renders a running balance column.
    """

    # Compute the maximum width required to render the change and balance
    # columns. In order to carry this out, we will pre-compute all the data to
    # render this and save it for later.
    change_sizer = AmountColumnSizer('change')
    balance_sizer = AmountColumnSizer('balance')

    entry_data = []
    for entry_line in realization.iterate_with_balance(postings):
        entry, leg_postings, change, balance = entry_line

        # Convert to cost if necessary. (Note that this agglutinates currencies,
        # so we'd rather do make the conversion at this level (inventory) than
        # convert the positions or amounts later.)
        if at_cost:
            change = change.reduce(convert.get_cost)
            if render_balance:
                balance = balance.reduce(convert.get_cost)

        # Compute the amounts and maximum widths for the change column.
        change_amounts = []
        for position in change.get_positions():
            units = position.units
            change_amounts.append(units)
            change_sizer.update(units.number, units.currency)

        # Compute the amounts and maximum widths for the balance column.
        balance_amounts = []
        if render_balance:
            for position in balance.get_positions():
                units = position.units
                balance_amounts.append(units)
                balance_sizer.update(units.number, units.currency)

        entry_data.append((entry, leg_postings, change_amounts, balance_amounts))

    return (entry_data, change_sizer, balance_sizer)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.journal_text.text_entries_table">
<code class="highlight language-python">
text_entries_table
(oss, postings, width, at_cost, render_balance, precision, verbosity, output_format)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text.text_entries_table" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a table of postings or directives with an accumulated balance.</p>
<p>This function has three verbosity modes for rendering:
1. COMPACT: no separating line, no postings
2. NORMAL: a separating line between entries, no postings
3. VERBOSE: renders all the postings in addition to normal.</p>
<p>The output is written to the 'oss' file object. Nothing is returned.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>oss</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>postings</code></td>
<td><code></code></td>
<td>
<p>A list of Posting or directive instances.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>width</code></td>
<td><code></code></td>
<td>
<p>An integer, the width to render the table to.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>at_cost</code></td>
<td><code></code></td>
<td>
<p>A boolean, if true, render the cost value, not the actual.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>render_balance</code></td>
<td><code></code></td>
<td>
<p>A boolean, if true, renders a running balance column.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>precision</code></td>
<td><code></code></td>
<td>
<p>An integer, the number of digits to render after the period.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>verbosity</code></td>
<td><code></code></td>
<td>
<p>An integer, the verbosity level. See COMPACT, NORMAL, VERBOSE, etc.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>output_format</code></td>
<td><code></code></td>
<td>
<p>A string, either 'text' or 'csv' for the chosen output format.
This routine's inner loop calculations are complex enough it gets reused by both
formats.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ValueError</code></td>
<td>
<p>If the width is insufficient to render the description.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def text_entries_table(oss, postings,
                       width, at_cost, render_balance, precision, verbosity,
                       output_format):
    """Render a table of postings or directives with an accumulated balance.

    This function has three verbosity modes for rendering:
    1. COMPACT: no separating line, no postings
    2. NORMAL: a separating line between entries, no postings
    3. VERBOSE: renders all the postings in addition to normal.

    The output is written to the 'oss' file object. Nothing is returned.

    Args:
      oss: A file object to write the output to.
      postings: A list of Posting or directive instances.
      width: An integer, the width to render the table to.
      at_cost: A boolean, if true, render the cost value, not the actual.
      render_balance: A boolean, if true, renders a running balance column.
      precision: An integer, the number of digits to render after the period.
      verbosity: An integer, the verbosity level. See COMPACT, NORMAL, VERBOSE, etc.
      output_format: A string, either 'text' or 'csv' for the chosen output format.
        This routine's inner loop calculations are complex enough it gets reused by both
        formats.
    Raises:
      ValueError: If the width is insufficient to render the description.
    """
    assert output_format in (FORMAT_TEXT, FORMAT_CSV)
    if output_format is FORMAT_CSV:
        csv_writer = csv.writer(oss)

    # Render the changes and balances to lists of amounts and precompute sizes.
    entry_data, change_sizer, balance_sizer = size_and_render_amounts(postings,
                                                                      at_cost,
                                                                      render_balance)

    # Render an empty line and compute the width the description should be (the
    # description is the only elastic field).
    empty_format = '{{date:10}} {{dirtype:5}} {{description}}  {}'.format(
        change_sizer.get_generic_format(precision))
    if render_balance:
        empty_format += '  {}'.format(balance_sizer.get_generic_format(precision))
    empty_line = empty_format.format(date='', dirtype='', description='',
                                     change='', balance='')
    description_width = width - len(empty_line)
    if description_width &lt;= 0:
        raise ValueError(
            "Width not sufficient to render text report ({} chars)".format(width))

    # Establish a format string for the final format of all lines.
    # pylint: disable=duplicate-string-formatting-argument
    line_format = '{{date:10}} {{dirtype:5}} {{description:{:d}.{:d}}}  {}'.format(
        description_width, description_width,
        change_sizer.get_generic_format(precision))
    change_format = change_sizer.get_format(precision)
    if render_balance:
        line_format += '  {}'.format(balance_sizer.get_generic_format(precision))
        balance_format = balance_sizer.get_format(precision)
    line_format += '\n'

    # Iterate over all the pre-computed data.
    for (entry, leg_postings, change_amounts, balance_amounts) in entry_data:

        # Render the date.
        date = entry.date.isoformat()

        # Get the directive type name.
        dirtype = TEXT_SHORT_NAME[type(entry)]
        if isinstance(entry, data.Transaction) and entry.flag:
            dirtype = entry.flag

        # Get the description string and split the description line in multiple
        # lines.
        description = get_entry_text_description(entry)
        description_lines = textwrap.wrap(description, width=description_width)

        # Ensure at least one line is rendered (for zip_longest).
        if not description_lines:
            description_lines.append('')

        # Render all the amounts in the line.
        for (description,
             change_amount,
             balance_amount) in itertools.zip_longest(description_lines,
                                                      change_amounts,
                                                      balance_amounts,
                                                      fillvalue=''):

            change = (change_format.format(change_amount.number,
                                           change_amount.currency)
                      if change_amount
                      else '')

            balance = (balance_format.format(balance_amount.number,
                                             balance_amount.currency)
                       if balance_amount
                       else '')

            if not description and verbosity &gt;= VERBOSE and leg_postings:
                description = '..'

            if output_format is FORMAT_TEXT:
                oss.write(line_format.format(date=date,
                                             dirtype=dirtype,
                                             description=description,
                                             change=change,
                                             balance=balance))
            else:
                change_number, change_currency = '', ''
                if change:
                    change_number, change_currency = change.split()

                if render_balance:
                    balance_number, balance_currency = '', ''
                    if balance:
                        balance_number, balance_currency = balance.split()

                    row = (date, dirtype, description,
                           change_number, change_currency,
                           balance_number, balance_currency)
                else:
                    row = (date, dirtype, description,
                           change_number, change_currency)
                csv_writer.writerow(row)

            # Reset the date, directive type and description. Only the first
            # line renders these; the other lines render only the amounts.
            if date:
                date = dirtype = ''

        if verbosity &gt;= VERBOSE:
            for posting in leg_postings:
                posting_str = render_posting(posting, change_format)
                if len(posting_str) &gt; description_width:
                    posting_str = posting_str[:description_width-3] + '...'

                if output_format is FORMAT_TEXT:
                    oss.write(line_format.format(date='',
                                                 dirtype='',
                                                 description=posting_str,
                                                 change='',
                                                 balance=''))
                else:
                    row = ('', '', posting_str)
                    csv_writer.writerow(row)

        if verbosity &gt;= NORMAL:
            oss.write('\n')
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.journal_text_test">
<code>journal_text_test</code>
<a class="headerlink" href="#beancount.reports.journal_text_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.journal_text_test.TestJournalTextRender">
<code>TestJournalTextRender</code>
<a class="headerlink" href="#beancount.reports.journal_text_test.TestJournalTextRender" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.journal_text_test.TestJournalTextRender.setUp">
<code class="highlight language-python">
setUp
(self, entries, _, __)

        </code>
<a class="headerlink" href="#beancount.reports.journal_text_test.TestJournalTextRender.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/journal_text_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc(expect_errors=True)
def setUp(self, entries, _, __):
    """
    plugin "beancount.plugins.implicit_prices"

    2014-01-01 open Assets:Checking
    2014-01-01 open Assets:Investing
    2014-01-01 open Assets:Savings
    2014-01-01 open Income:MountainOfMoney
    2014-01-01 open Equity:Opening-Balances

    2014-01-05 pad Assets:Checking Equity:Opening-Balances

    2014-02-10 balance Assets:Checking   100.00 USD

    2014-03-04 ! "Salary"
      Income:MountainOfMoney    -4000.00 USD
      Assets:Checking

    2014-03-05 balance Assets:Checking   4100.00 USD

    2014-03-10 note Assets:Checking "Something to say"
    2014-03-11 document Assets:Checking "/path/to/document.pdf"

    ;; With link.
    2014-03-17 * "Transfer" ^784375fd5a68
      Assets:Checking          -2000 USD
      Assets:Checking          -1500 USD
      Assets:Investing:Cash     3500 USD

    2014-03-25 * "Investment"
      Assets:Investing:Cash      -3000 USD
      Assets:Investing:Stock        30 STOCK {100 USD}

    ;; Failing.
    2014-05-01 balance  Assets:Checking   0.00 USD

    2014-12-31 close Assets:Checking
    """
    self.entries = entries
    real_root = realization.realize(self.entries)
    self.real_account = realization.get(real_root, 'Assets:Checking')
    self.postings = realization.get_postings(self.real_account)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.misc_reports">
<code>misc_reports</code>
<a class="headerlink" href="#beancount.reports.misc_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Miscellaneous report classes.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.AccountsReport">
<code>AccountsReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.AccountsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the list of all accounts.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.ActivityReport">
<code>ActivityReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.ActivityReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render the last or recent update activity.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.ActivityReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.misc_reports.ActivityReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-d', '--cutoff',
                        action='store', default=None,
                        type=date_utils.parse_date_liberally,
                        help="Cutoff date where we ignore whatever comes after.")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.ActivityReport.render_real_html">
<code class="highlight language-python">
render_real_html
(cls, real_root, price_map, price_date, options_map, file)

        </code>
<a class="headerlink" href="#beancount.reports.misc_reports.ActivityReport.render_real_html" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Wrap an htmldiv into our standard HTML template.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A price database.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A date for evaluating prices.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict, options as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write the output to.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_real_html(cls, real_root, price_map, price_date, options_map, file):
    """Wrap an htmldiv into our standard HTML template.

    Args:
      real_root: An instance of RealAccount.
      price_map: A price database.
      price_date: A date for evaluating prices.
      options_map: A dict, options as produced by the parser.
      file: A file object to write the output to.
    """
    template = get_html_template()
    oss = io.StringIO()
    cls.render_real_htmldiv(real_root, price_map, price_date, options_map, oss)
    file.write(template.format(body=oss.getvalue(),
                               title=''))
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.CurrentEventsReport">
<code>CurrentEventsReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.CurrentEventsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Produce a table of the current values of all event types.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.CurrentEventsReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.misc_reports.CurrentEventsReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    events = {}
    for entry in entries:
        if isinstance(entry, data.Event):
            events[entry.type] = entry.description
    return table.create_table([(type_, description)
                               for type_, description in sorted(events.items())],
                              [(0, "Type", self.formatter.render_event_type),
                               (1, "Description")])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.ErrorReport">
<code>ErrorReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.ErrorReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Report the errors.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.EventsReport">
<code>EventsReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.EventsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Produce a table of all the values of a particular event.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.EventsReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.misc_reports.EventsReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-e', '--expr',
                        action='store', default=None,
                        help="A regexp to filer on which events to display.")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.EventsReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.misc_reports.EventsReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    event_entries = []
    for entry in entries:
        if not isinstance(entry, data.Event):
            continue
        if self.args.expr and not re.match(self.args.expr, entry.type):
            continue
        event_entries.append(entry)
    return table.create_table([(entry.date, entry.type, entry.description)
                               for entry in event_entries],
                              [(0, "Date", datetime.date.isoformat),
                               (1, "Type"),
                               (2, "Description")])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.NoopReport">
<code>NoopReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.NoopReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Report nothing.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.PrintReport">
<code>PrintReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.PrintReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the entries.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.StatsDirectivesReport">
<code>StatsDirectivesReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.StatsDirectivesReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render statistics on each directive type, the number of entries by type.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.StatsDirectivesReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, _, __)

        </code>
<a class="headerlink" href="#beancount.reports.misc_reports.StatsDirectivesReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, _, __):
    entries_by_type = misc_utils.groupby(lambda entry: type(entry).__name__,
                                         entries)
    nb_entries_by_type = {name: len(entries)
                          for name, entries in entries_by_type.items()}
    rows = sorted(nb_entries_by_type.items(),
                  key=lambda x: x[1], reverse=True)
    rows = [(name, str(count)) for (name, count) in rows]
    rows.append(('~Total~', str(len(entries))))

    return table.create_table(rows, [(0, 'Type'),
                                     (1, 'Num Entries', '{:&gt;}'.format)])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.misc_reports.StatsPostingsReport">
<code>StatsPostingsReport</code>
<a class="headerlink" href="#beancount.reports.misc_reports.StatsPostingsReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render the number of postings for each account.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.misc_reports.StatsPostingsReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, _, __)

        </code>
<a class="headerlink" href="#beancount.reports.misc_reports.StatsPostingsReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/misc_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, _, __):
    all_postings = [posting
                    for entry in entries
                    if isinstance(entry, data.Transaction)
                    for posting in entry.postings]
    postings_by_account = misc_utils.groupby(lambda posting: posting.account,
                                             all_postings)
    nb_postings_by_account = {key: len(postings)
                              for key, postings in postings_by_account.items()}
    rows = sorted(nb_postings_by_account.items(), key=lambda x: x[1], reverse=True)
    rows = [(name, str(count)) for (name, count) in rows]
    rows.append(('~Total~', str(sum(nb_postings_by_account.values()))))

    return table.create_table(rows, [(0, 'Account'),
                                     (1, 'Num Postings', '{:&gt;}'.format)])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.price_reports">
<code>price_reports</code>
<a class="headerlink" href="#beancount.reports.price_reports" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Miscellaneous report classes.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.price_reports.CommoditiesReport">
<code>CommoditiesReport</code>
<a class="headerlink" href="#beancount.reports.price_reports.CommoditiesReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out a list of commodities.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.price_reports.CommoditiesReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.price_reports.CommoditiesReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/price_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    price_map = prices.build_price_map(entries)
    return table.create_table([(base_quote,)
                               for base_quote in sorted(price_map.forward_pairs)],
                              [(0, "Base/Quote", self.formatter.render_commodity)])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.price_reports.CommodityLifetimes">
<code>CommodityLifetimes</code>
<a class="headerlink" href="#beancount.reports.price_reports.CommodityLifetimes" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out a list of lifetimes of each commodity.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.price_reports.CommodityLifetimes.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.price_reports.CommodityLifetimes.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/price_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-c', '--compress-days', type=int,
                        action='store', default=None,
                        help="The number of unused days to allow for continuous usage.")
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.price_reports.CommodityPricesReport">
<code>CommodityPricesReport</code>
<a class="headerlink" href="#beancount.reports.price_reports.CommodityPricesReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print all the prices for a particular commodity.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.price_reports.CommodityPricesReport.add_args">
<code class="highlight language-python">
add_args
(parser)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.price_reports.CommodityPricesReport.add_args" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Add arguments to parse for this report.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>parser</code></td>
<td><code></code></td>
<td>
<p>An instance of argparse.ArgumentParser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/price_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@classmethod
def add_args(cls, parser):
    parser.add_argument('-c', '--commodity', '--currency',
                        action='store', default=None,
                        help="The commodity pair to display.")
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.price_reports.CommodityPricesReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.price_reports.CommodityPricesReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/price_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    date_rates = self.get_date_rates(entries)
    return table.create_table(date_rates,
                              [(0, "Date", datetime.date.isoformat),
                               (1, "Price", '{:.5f}'.format)])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.price_reports.PriceDBReport">
<code>PriceDBReport</code>
<a class="headerlink" href="#beancount.reports.price_reports.PriceDBReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the normalized price entries from the price db.
    Normalized means that we print prices in the most common (base, quote) order.
    This can be used to rebuild a prices database without having to share the
    entire ledger file.</p>
<pre><code>Only the forward prices are printed; which (base, quote) pair is selected is
selected based on the most common occurrence between (base, quote) and
(quote, base). This is done in the price map.
</code></pre>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.price_reports.PricesReport">
<code>PricesReport</code>
<a class="headerlink" href="#beancount.reports.price_reports.PricesReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print out the unnormalized price entries that we input.
    Unnormalized means that we may render both (base,quote) and (quote,base).
    This can be used to rebuild a prices database without having to share the
    entire ledger file.</p>
<pre><code>Note: this type of report should be removed once we have filtering on
directive type, this is simply the 'print' report with type:price. Maybe
rename the 'pricedb' report to just 'prices' for simplicity's sake.
</code></pre>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.price_reports.TickerReport">
<code>TickerReport</code>
<a class="headerlink" href="#beancount.reports.price_reports.TickerReport" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Print a parseable mapping of (base, quote, ticker, name) for all commodities.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.price_reports.TickerReport.generate_table">
<code class="highlight language-python">
generate_table
(self, entries, errors, options_map)

        </code>
<a class="headerlink" href="#beancount.reports.price_reports.TickerReport.generate_table" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Render the report to a Table instance.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entries</code></td>
<td><code></code></td>
<td>
<p>A list of directives to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>errors</code></td>
<td><code></code></td>
<td>
<p>A list of errors that occurred during processing.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>options_map</code></td>
<td><code></code></td>
<td>
<p>A dict of options, as produced by the parser.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>An instance of Table, that will get converted to another format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/price_reports.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def generate_table(self, entries, errors, options_map):
    commodity_map = getters.get_commodity_map(entries)
    ticker_info = getters.get_values_meta(commodity_map, 'name', 'ticker', 'quote')

    price_rows = [
        (currency, cost_currency, ticker, name)
        for currency, (name, ticker, cost_currency) in sorted(ticker_info.items())
        if ticker]

    return table.create_table(price_rows,
                              [(0, "Currency"),
                               (1, "Cost-Currency"),
                               (2, "Symbol"),
                               (3, "Name")])
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.report">
<code>report</code>
<a class="headerlink" href="#beancount.reports.report" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Produce various custom implemented reports.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.report.ListFormatsAction">
<code>ListFormatsAction</code>
<a class="headerlink" href="#beancount.reports.report.ListFormatsAction" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>An argparse action that prints all supported formats (for each report).</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.report.ListReportsAction">
<code>ListReportsAction</code>
<a class="headerlink" href="#beancount.reports.report.ListReportsAction" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>An argparse action that just prints the list of reports and exits.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.report.get_all_reports">
<code class="highlight language-python">
get_all_reports
()

        </code>
<a class="headerlink" href="#beancount.reports.report.get_all_reports" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Return all report classes.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A list of all available report classes.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/report.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_all_reports():
    """Return all report classes.

    Returns:
      A list of all available report classes.
    """
    return functools.reduce(operator.add,
                            map(lambda module: module.__reports__,
                                [balance_reports,
                                 journal_reports,
                                 holdings_reports,
                                 export_reports,
                                 price_reports,
                                 misc_reports,
                                 convert_reports]))
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.report.get_list_report_string">
<code class="highlight language-python">
get_list_report_string
(only_report=None)

        </code>
<a class="headerlink" href="#beancount.reports.report.get_list_report_string" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Return a formatted string for the list of supported reports.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>only_report</code></td>
<td><code></code></td>
<td>
<p>A string, the name of a single report to produce the help
for. If not specified, list all the available reports.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A help string, or None, if 'only_report' was provided and is not a valid
report name.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/report.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def get_list_report_string(only_report=None):
    """Return a formatted string for the list of supported reports.

    Args:
      only_report: A string, the name of a single report to produce the help
        for. If not specified, list all the available reports.
    Returns:
      A help string, or None, if 'only_report' was provided and is not a valid
      report name.
    """
    oss = io.StringIO()
    num_reports = 0
    for report_class in get_all_reports():
        # Filter the name
        if only_report and only_report not in report_class.names:
            continue

        # Get the textual description.
        description = textwrap.fill(
            re.sub(' +', ' ', ' '.join(report_class.__doc__.splitlines())),
            initial_indent="    ",
            subsequent_indent="    ",
            width=80)

        # Get the report's arguments.
        parser = version.ArgumentParser()
        report_ = report_class
        report_class.add_args(parser)

        # Get the list of supported formats.
        ## formats = report_class.get_supported_formats()

        oss.write('{}:\n{}\n'.format(','.join(report_.names),
                                     description))
        num_reports += 1

    if not num_reports:
        return None
    return oss.getvalue()
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.table">
<code>table</code>
<a class="headerlink" href="#beancount.reports.table" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Table rendering.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.table.Table">
<code>Table</code>
<a class="headerlink" href="#beancount.reports.table.Table" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Table(columns, header, body)</p>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.table.Table.__getnewargs__">
<code class="highlight language-python">
__getnewargs__
(self)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.table.Table.__getnewargs__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return self as a plain tuple.  Used by copy and pickle.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __getnewargs__(self):
    'Return self as a plain tuple.  Used by copy and pickle.'
    return _tuple(self)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.table.Table.__new__">
<code class="highlight language-python">
__new__
(_cls, columns, header, body)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
<small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#beancount.reports.table.Table.__new__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Create new instance of Table(columns, header, body)</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.table.Table.__repr__">
<code class="highlight language-python">
__repr__
(self)

        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#beancount.reports.table.Table.__repr__" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Return a nicely formatted representation string</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def __repr__(self):
    'Return a nicely formatted representation string'
    return self.__class__.__name__ + repr_fmt % self
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.attribute_to_title">
<code class="highlight language-python">
attribute_to_title
(fieldname)

        </code>
<a class="headerlink" href="#beancount.reports.table.attribute_to_title" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Convert programming id into readable field name.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fieldname</code></td>
<td><code></code></td>
<td>
<p>A string, a programming ids, such as 'book_value'.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A readable string, such as 'Book Value.'</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def attribute_to_title(fieldname):
    """Convert programming id into readable field name.

    Args:
      fieldname: A string, a programming ids, such as 'book_value'.
    Returns:
      A readable string, such as 'Book Value.'
   """
    return fieldname.replace('_', ' ').title()
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.compute_table_widths">
<code class="highlight language-python">
compute_table_widths
(rows)

        </code>
<a class="headerlink" href="#beancount.reports.table.compute_table_widths" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Compute the max character widths of a list of rows.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rows</code></td>
<td><code></code></td>
<td>
<p>A list of rows, which are sequences of strings.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A list of integers, the maximum widths required to render the columns of
this table.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IndexError</code></td>
<td>
<p>If the rows are of different lengths.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def compute_table_widths(rows):
    """Compute the max character widths of a list of rows.

    Args:
      rows: A list of rows, which are sequences of strings.
    Returns:
      A list of integers, the maximum widths required to render the columns of
      this table.
    Raises:
      IndexError: If the rows are of different lengths.
    """
    row_iter = iter(rows)
    first_row = next(row_iter)
    num_columns = len(first_row)
    column_widths = [len(cell) for cell in first_row]
    for row in row_iter:
        for i, cell in enumerate(row):
            if not isinstance(cell, str):
                cell = str(cell)
            cell_len = len(cell)
            if cell_len &gt; column_widths[i]:
                column_widths[i] = cell_len
        if i+1 != num_columns:
            raise IndexError("Invalid number of rows")
    return column_widths
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.create_table">
<code class="highlight language-python">
create_table
(rows, field_spec=None)

        </code>
<a class="headerlink" href="#beancount.reports.table.create_table" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Convert a list of tuples to an table report object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rows</code></td>
<td><code></code></td>
<td>
<p>A list of tuples.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>field_spec</code></td>
<td><code></code></td>
<td>
<p>A list of strings, or a list of
(FIELDNAME-OR-INDEX, HEADER, FORMATTER-FUNCTION)
triplets, that selects a subset of the fields is to be rendered as well
as their ordering. If this is a dict, the values are functions to call
on the fields to render them. If a function is set to None, we will just
call str() on the field.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A Table instance.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def create_table(rows, field_spec=None):
    """Convert a list of tuples to an table report object.

    Args:
      rows: A list of tuples.
      field_spec: A list of strings, or a list of
        (FIELDNAME-OR-INDEX, HEADER, FORMATTER-FUNCTION)
        triplets, that selects a subset of the fields is to be rendered as well
        as their ordering. If this is a dict, the values are functions to call
        on the fields to render them. If a function is set to None, we will just
        call str() on the field.
    Returns:
      A Table instance.
    """
    # Normalize field_spec to a dict.
    if field_spec is None:
        namedtuple_class = type(rows[0])
        field_spec = [(field, None, None)
                      for field in namedtuple_class._fields]

    elif isinstance(field_spec, (list, tuple)):
        new_field_spec = []
        for field in field_spec:
            if isinstance(field, tuple):
                assert len(field) &lt;= 3, field
                if len(field) == 1:
                    field, = field
                    new_field_spec.append((field, None, None))
                elif len(field) == 2:
                    field, header = field
                    new_field_spec.append((field, header, None))
                elif len(field) == 3:
                    new_field_spec.append(field)
            else:
                if isinstance(field, str):
                    title = attribute_to_title(field)
                elif isinstance(field, int):
                    title = "Field {}".format(field)
                else:
                    raise ValueError("Invalid type for column name")
                new_field_spec.append((field, title, None))

        field_spec = new_field_spec

    # Ensure a nicely formatted header.
    field_spec = [((name, attribute_to_title(name), formatter)
                   if header_ is None
                   else (name, header_, formatter))
                  for (name, header_, formatter) in field_spec]

    assert isinstance(field_spec, list), field_spec
    assert all(len(x) == 3 for x in field_spec), field_spec

    # Compute the column names.
    columns = [name for (name, _, __) in field_spec]

    # Compute the table header.
    header = [header_column for (_, header_column, __) in field_spec]

    # Compute the table body.
    body = []
    for row in rows:
        body_row = []
        for name, _, formatter in field_spec:
            if isinstance(name, str):
                value = getattr(row, name)
            elif isinstance(name, int):
                value = row[name]
            else:
                raise ValueError("Invalid type for column name")
            if value is not None:
                if formatter is not None:
                    value = formatter(value)
                else:
                    value = str(value)
            else:
                value = ''
            body_row.append(value)
        body.append(body_row)

    return Table(columns, header, body)
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.render_table">
<code class="highlight language-python">
render_table
(table_, output, output_format, css_id=None, css_class=None)

        </code>
<a class="headerlink" href="#beancount.reports.table.render_table" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render the given table to the output file object in the requested format.</p>
<p>The table gets written out to the 'output' file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>table_</code></td>
<td><code></code></td>
<td>
<p>An instance of Table.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>output</code></td>
<td><code></code></td>
<td>
<p>A file object you can write to.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>output_format</code></td>
<td><code></code></td>
<td>
<p>A string, the format to write the table to,
either 'csv', 'txt' or 'html'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>css_id</code></td>
<td><code></code></td>
<td>
<p>A string, an optional CSS id for the table object (only used for HTML).</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>css_class</code></td>
<td><code></code></td>
<td>
<p>A string, an optional CSS class for the table object (only used for HTML).</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def render_table(table_, output, output_format, css_id=None, css_class=None):
    """Render the given table to the output file object in the requested format.

    The table gets written out to the 'output' file.

    Args:
      table_: An instance of Table.
      output: A file object you can write to.
      output_format: A string, the format to write the table to,
        either 'csv', 'txt' or 'html'.
      css_id: A string, an optional CSS id for the table object (only used for HTML).
      css_class: A string, an optional CSS class for the table object (only used for HTML).
    """
    if output_format in ('txt', 'text'):
        text = table_to_text(table_, "  ", formats={'*': '&gt;', 'account': '&lt;'})
        output.write(text)

    elif output_format in ('csv',):
        table_to_csv(table_, file=output)

    elif output_format in ('htmldiv', 'html'):

        if output_format == 'html':
            output.write('&lt;html&gt;\n')
            output.write('&lt;body&gt;\n')

        output.write('&lt;div id="{}"&gt;\n'.format(css_id) if css_id else '&lt;div&gt;\n')
        classes = [css_class] if css_class else None
        table_to_html(table_, file=output, classes=classes)
        output.write('&lt;/div&gt;\n')

        if output_format == 'html':
            output.write('&lt;/body&gt;\n')
            output.write('&lt;/html&gt;\n')

    else:
        raise NotImplementedError("Unsupported format: {}".format(output_format))
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.table_to_csv">
<code class="highlight language-python">
table_to_csv
    (table, file=None, **
kwargs)

        </code>
<a class="headerlink" href="#beancount.reports.table.table_to_csv" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a Table to a CSV file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>table</code></td>
<td><code></code></td>
<td>
<p>An instance of a Table.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write to. If no object is provided, this
function returns a string.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>**kwargs</code></td>
<td><code></code></td>
<td>
<p>Optional arguments forwarded to csv.writer().</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, the rendered table, or None, if a file object is provided
to write to.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def table_to_csv(table, file=None, **kwargs):
    """Render a Table to a CSV file.

    Args:
      table: An instance of a Table.
      file: A file object to write to. If no object is provided, this
        function returns a string.
      **kwargs: Optional arguments forwarded to csv.writer().
    Returns:
      A string, the rendered table, or None, if a file object is provided
      to write to.
    """
    output_file = file or io.StringIO()

    writer = csv.writer(output_file, **kwargs)
    if table.header:
        writer.writerow(table.header)
    writer.writerows(table.body)

    if not file:
        return output_file.getvalue()
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.table_to_html">
<code class="highlight language-python">
table_to_html
(table, classes=None, file=None)

        </code>
<a class="headerlink" href="#beancount.reports.table.table_to_html" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a Table to HTML.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>table</code></td>
<td><code></code></td>
<td>
<p>An instance of a Table.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>classes</code></td>
<td><code></code></td>
<td>
<p>A list of string, CSS classes to set on the table.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code></code></td>
<td>
<p>A file object to write to. If no object is provided, this
function returns a string.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, the rendered table, or None, if a file object is provided
to write to.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def table_to_html(table, classes=None, file=None):
    """Render a Table to HTML.

    Args:
      table: An instance of a Table.
      classes: A list of string, CSS classes to set on the table.
      file: A file object to write to. If no object is provided, this
        function returns a string.
    Returns:
      A string, the rendered table, or None, if a file object is provided
      to write to.
    """
    # Initialize file.
    oss = io.StringIO() if file is None else file
    oss.write('&lt;table class="{}"&gt;\n'.format(' '.join(classes or [])))

    # Render header.
    if table.header:
        oss.write('  &lt;thead&gt;\n')
        oss.write('    &lt;tr&gt;\n')
        for header in table.header:
            oss.write('      &lt;th&gt;{}&lt;/th&gt;\n'.format(header))
        oss.write('    &lt;/tr&gt;\n')
        oss.write('  &lt;/thead&gt;\n')

    # Render body.
    oss.write('  &lt;tbody&gt;\n')
    for row in table.body:
        oss.write('    &lt;tr&gt;\n')
        for cell in row:
            oss.write('      &lt;td&gt;{}&lt;/td&gt;\n'.format(cell))
        oss.write('    &lt;/tr&gt;\n')
    oss.write('  &lt;/tbody&gt;\n')

    # Render footer.
    oss.write('&lt;/table&gt;\n')
    if file is None:
        return oss.getvalue()
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.table.table_to_text">
<code class="highlight language-python">
table_to_text
(table, column_interspace=' ', formats=None)

        </code>
<a class="headerlink" href="#beancount.reports.table.table_to_text" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a Table to ASCII text.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>table</code></td>
<td><code></code></td>
<td>
<p>An instance of a Table.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>column_interspace</code></td>
<td><code></code></td>
<td>
<p>A string to render between the columns as spacer.</p>
</td>
<td><code>' '</code></td>
</tr>
<tr>
<td><code>formats</code></td>
<td><code></code></td>
<td>
<p>An optional dict of column name to a format character that gets
inserted in a format string specified, like this (where '&lt;char&gt;' is):
{:&lt;char&gt;&lt;width&gt;}. A key of '<em>' will provide a default value, like
this, for example: (... formats={'</em>': '&gt;'}).</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string, the rendered text table.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def table_to_text(table,
                  column_interspace=" ",
                  formats=None):
    """Render a Table to ASCII text.

    Args:
      table: An instance of a Table.
      column_interspace: A string to render between the columns as spacer.
      formats: An optional dict of column name to a format character that gets
        inserted in a format string specified, like this (where '&lt;char&gt;' is):
        {:&lt;char&gt;&lt;width&gt;}. A key of '*' will provide a default value, like
        this, for example: (... formats={'*': '&gt;'}).
    Returns:
      A string, the rendered text table.
    """
    column_widths = compute_table_widths(itertools.chain([table.header],
                                                         table.body))

    # Insert column format chars and compute line formatting string.
    column_formats = []
    if formats:
        default_format = formats.get('*', None)
    for column, width in zip(table.columns, column_widths):
        if column and formats:
            format_ = formats.get(column, default_format)
            if format_:
                column_formats.append("{{:{}{:d}}}".format(format_, width))
            else:
                column_formats.append("{{:{:d}}}".format(width))
        else:
            column_formats.append("{{:{:d}}}".format(width))

    line_format = column_interspace.join(column_formats) + "\n"
    separator = line_format.format(*[('-' * width) for width in column_widths])

    # Render the header.
    oss = io.StringIO()
    if table.header:
        oss.write(line_format.format(*table.header))

    # Render the body.
    oss.write(separator)
    for row in table.body:
        oss.write(line_format.format(*row))
    oss.write(separator)

    return oss.getvalue()
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.tree_table">
<code>tree_table</code>
<a class="headerlink" href="#beancount.reports.tree_table" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<p>Routines to render an HTML table with a tree of accounts.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.tree_table.is_account_active">
<code class="highlight language-python">
is_account_active
(real_account)

        </code>
<a class="headerlink" href="#beancount.reports.tree_table.is_account_active" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Return true if the account should be rendered. An active account has
at least one directive that is not an Open directive.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_account</code></td>
<td><code></code></td>
<td>
<p>An instance of RealAccount.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A boolean, true if the account is active, according to the definition above.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/tree_table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def is_account_active(real_account):
    """Return true if the account should be rendered. An active account has
    at least one directive that is not an Open directive.

    Args:
      real_account: An instance of RealAccount.
    Returns:
      A boolean, true if the account is active, according to the definition above.
    """
    for entry in real_account.txn_postings:
        if isinstance(entry, data.Open):
            continue
        return True
    return False
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.tree_table.table_of_balances">
<code class="highlight language-python">
table_of_balances
(real_root, price_map, price_date, operating_currencies, formatter, classes=None)

        </code>
<a class="headerlink" href="#beancount.reports.tree_table.table_of_balances" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Render a tree table with the balance of each accounts.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real_root</code></td>
<td><code></code></td>
<td>
<p>A RealAccount node, the root node to render.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_map</code></td>
<td><code></code></td>
<td>
<p>A prices map, a built by build_price_map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_date</code></td>
<td><code></code></td>
<td>
<p>A datetime.date instance, the date at which to compute market value.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>operating_currencies</code></td>
<td><code></code></td>
<td>
<p>A list of strings, the operating currencies to render
to their own dedicated columns.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>formatter</code></td>
<td><code></code></td>
<td>
<p>A object used to render account names and other links.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>classes</code></td>
<td><code></code></td>
<td>
<p>A list of strings, the CSS classes to attach to the renderd
top-level table objet.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>A string with HTML contents, the rendered table.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/tree_table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def table_of_balances(real_root, price_map, price_date,
                      operating_currencies, formatter,
                      classes=None):
    """Render a tree table with the balance of each accounts.

    Args:
      real_root: A RealAccount node, the root node to render.
      price_map: A prices map, a built by build_price_map.
      price_date: A datetime.date instance, the date at which to compute market value.
      operating_currencies: A list of strings, the operating currencies to render
        to their own dedicated columns.
      formatter: A object used to render account names and other links.
      classes: A list of strings, the CSS classes to attach to the renderd
        top-level table objet.
    Returns:
      A string with HTML contents, the rendered table.
    """
    header = ['Account'] + operating_currencies + ['Other']

    # Pre-calculate which accounts should be rendered.
    real_active = realization.filter(real_root, is_account_active)
    if real_active:
        active_set = {real_account.account
                      for real_account in realization.iter_children(real_active)}
    else:
        active_set = set()

    balance_totals = inventory.Inventory()
    oss = io.StringIO()
    classes = list(classes) if classes else []
    classes.append('fullwidth')
    for real_account, cells, row_classes in tree_table(oss, real_root, formatter,
                                                       header, classes):

        if real_account is TOTALS_LINE:
            line_balance = balance_totals
            row_classes.append('totals')
        else:
            # Check if this account has had activity; if not, skip rendering it.
            if (real_account.account not in active_set and
                not account_types.is_root_account(real_account.account)):
                continue

            if real_account.account is None:
                row_classes.append('parent-node')

            # For each account line, get the final balance of the account at
            # latest market value.
            line_balance = real_account.balance.reduce(convert.get_value, price_map)

            # Update the total balance for the totals line.
            balance_totals += line_balance

        # Extract all the positions that the user has identified as operating
        # currencies to their own subinventories.
        ccy_dict = line_balance.segregate_units(operating_currencies)

        # FIXME: This little algorithm is inefficient; rewrite it.
        for currency in operating_currencies:
            units = ccy_dict[currency].get_currency_units(currency)
            cells.append(formatter.render_number(units.number, units.currency)
                         if units.number != ZERO
                         else '')

        # Render all the rest of the inventory in the last cell.
        if None in ccy_dict:
            ccy_balance = ccy_dict[None]
            last_cell = '&lt;br/&gt;'.join(formatter.render_amount(pos.units)
                                     for pos in sorted(ccy_balance))
        else:
            last_cell = ''
        cells.append(last_cell)

    return oss.getvalue()
</code></pre>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="beancount.reports.tree_table.tree_table">
<code class="highlight language-python">
tree_table
(oss, real_account, formatter, header=None, classes=None)

        </code>
<a class="headerlink" href="#beancount.reports.tree_table.tree_table" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<p>Generator to a tree of accounts as an HTML table.</p>
<p>This yields each real_account object in turn and a list object used to
provide the values for the various columns to render.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>oss</code></td>
<td><code></code></td>
<td>
<p>a io.StringIO instance, into which we will render the HTML.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>real_account</code></td>
<td><code></code></td>
<td>
<p>an instance of a RealAccount node.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>formatter</code></td>
<td><code></code></td>
<td>
<p>A object used to render account names and other links.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>header</code></td>
<td><code></code></td>
<td>
<p>a list of header columns to render. The first column is special,
      and is used for the account name.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>classes</code></td>
<td><code></code></td>
<td>
<p>a list of CSS class strings to apply to the table element.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A generator of tuples of
  real_account</code></td>
<td>
<p>An instance of RealAccount to render as a row
  cells: A mutable list object to accumulate values for each column you
    want to render.
  row_classes: A mutable list object to accumulate css classes that you
    want to add for the row.</p>
<p>You need to append to the given 'cells' object; if you don't append
anything, this tells this routine to skip rendering the row. On the very
last line, the 'real_account' object will be a special sentinel value to
indicate that it is meant to render the totals line: TOTALS_LINE.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>beancount/reports/tree_table.py</code></summary>
<pre class="highlight"><code class="language-python linenums">def tree_table(oss, real_account, formatter, header=None, classes=None):
    """Generator to a tree of accounts as an HTML table.

    This yields each real_account object in turn and a list object used to
    provide the values for the various columns to render.

    Args:
      oss: a io.StringIO instance, into which we will render the HTML.
      real_account: an instance of a RealAccount node.
      formatter: A object used to render account names and other links.
      header: a list of header columns to render. The first column is special,
              and is used for the account name.
      classes: a list of CSS class strings to apply to the table element.
    Returns:
      A generator of tuples of
        real_account: An instance of RealAccount to render as a row
        cells: A mutable list object to accumulate values for each column you
          want to render.
        row_classes: A mutable list object to accumulate css classes that you
          want to add for the row.

      You need to append to the given 'cells' object; if you don't append
      anything, this tells this routine to skip rendering the row. On the very
      last line, the 'real_account' object will be a special sentinel value to
      indicate that it is meant to render the totals line: TOTALS_LINE.
    """
    write = lambda data: (oss.write(data), oss.write('\n'))

    classes = list(classes) if classes else []
    classes.append('tree-table')
    write('&lt;table class="{}"&gt;'.format(' '.join(classes) if classes else ''))

    if header:
        write('&lt;thead&gt;')
        write('&lt;tr&gt;')
        header_iter = iter(header)
        write('&lt;th class="first"&gt;{}&lt;/th&gt;'.format(next(header_iter)))
        for column in header_iter:
            write('&lt;th&gt;{}&lt;/th&gt;'.format(column))
        write('&lt;/tr&gt;')
        write('&lt;/thead&gt;')

    # Note: This code eventually should be reworked to be agnostic regarding
    # text or HTML output rendering.
    lines = realization.dump(real_account)

    # Yield with a None for the final line.
    lines.append((None, None, TOTALS_LINE))

    for first_line, unused_cont_line, real_acc in lines:
        # Let the caller fill in the data to be rendered by adding it to a list
        # objects. The caller may return multiple cell values; this will create
        # multiple columns.
        cells = []
        row_classes = []
        yield real_acc, cells, row_classes

        # If no cells were added, skip the line. If you want to render empty
        # cells, append empty strings.
        if not cells:
            continue

        # Render the row
        write('&lt;tr class="{}"&gt;'.format(' '.join(row_classes)))

        if real_acc is TOTALS_LINE:
            label = '&lt;span class="totals-label"&gt;&lt;/span&gt;'
        else:
            label = (formatter.render_account(real_acc.account)
                     if formatter
                     else real_acc.account)

        write('&lt;td class="tree-node-name"&gt;{}&lt;/td&gt;'.format(label))

        # Add columns for each value rendered.
        for cell in cells:
            write('&lt;td class="num"&gt;{}&lt;/td&gt;'.format(cell))

        write('&lt;/tr&gt;')

    write('&lt;/table&gt;')
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="beancount.reports.tree_table_test">
<code>tree_table_test</code>
<a class="headerlink" href="#beancount.reports.tree_table_test" title="Permanent link"></a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="beancount.reports.tree_table_test.TestTables">
<code>TestTables</code>
<a class="headerlink" href="#beancount.reports.tree_table_test.TestTables" title="Permanent link"></a></h3>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="beancount.reports.tree_table_test.TestTables.setUp">
<code class="highlight language-python">
setUp
(self, entries, _, __)

        </code>
<a class="headerlink" href="#beancount.reports.tree_table_test.TestTables.setUp" title="Permanent link"></a></h4>
<div class="doc doc-contents">
<p>Hook method for setting up the test fixture before exercising it.</p>
<details class="quote">
<summary>Source code in <code>beancount/reports/tree_table_test.py</code></summary>
<pre class="highlight"><code class="language-python linenums">@loader.load_doc()
def setUp(self, entries, _, __):
    """
    2014-01-01 open Assets:US:Checking
    2014-01-01 open Assets:CA:Checking
    2014-01-01 open Assets:Inactive
    2014-01-01 open Equity:Opening-Balances

    2014-07-04 *
      Assets:US:Checking      3000 USD
      Equity:Opening-Balances

    2014-07-04 *
      Assets:CA:Checking      3000 CAD
      Equity:Opening-Balances

    """
    self.real_root = realization.realize(entries)
</code></pre>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<footer>
<div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-right" href="beancount.scripts.html" title="beancount.scripts">Next <span class="icon icon-circle-arrow-right"></span></a>
<a class="btn btn-neutral" href="beancount.query.html" title="beancount.query"><span class="icon icon-circle-arrow-left"></span> Previous</a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<a class="fa fa-github" href="https://github.com/beancount/docs/" style="float: left; color: #fcfcfc"> GitHub</a>
<span><a href="beancount.query.html" style="color: #fcfcfc;">« Previous</a></span>
<span style="margin-left: 15px"><a href="beancount.scripts.html" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '..';</script>
<script defer="" src="../js/theme.js"></script>
<script defer="" src="../js/extra.js"></script>
<script defer="" src="../search/main.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
